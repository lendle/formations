(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(t,n,e){t.exports=e(309)},183:function(t,n,e){},309:function(t,n,e){"use strict";e.r(n);var r,a=e(0),o=e.n(a),i=e(34),u=e.n(i),s=e(29),l=e(39),c=e(149),f=e(314),p=e(13),h=e(14),d=e(23),m=e(22),v=e(24),y=e(16),g=(e(183),e(20)),O=function(){function t(){Object(p.a)(this,t),this.group=void 0}return Object(h.a)(t,[{key:"withGroup",value:function(t){return this.group=t,this}}]),t}();!function(t){t.LEAD="lead",t.LT="lt",t.RT="rt"}(r||(r={}));var E,b,S,w,k,j,T=r;!function(t){t.SPLIT="Split",t.FILL="Fill"}(E||(E={})),function(t){t.NONE="None",t.OTTER="Otter",t.SKYVAN="Skyvan"}(b||(b={})),function(t){t.DEFAULT="DEFAULT",t.PLANE="PLANE",t.BUILD_ORDER="BUILD_ORDER"}(S||(S={})),function(t){t.SLOT_NUM="SLOT_NUM",t.BUILD_ORDER="BUILD_ORDER"}(w||(w={})),function(t){t.FORMATION="Formation",t.PLANES="Planes",t.BOTH="Formation & planes"}(k||(k={})),function(t){t.HD="HD",t.SD="SD"}(j||(j={}));var A=Math.PI,L=2*A,N=function(){function t(n,e){Object(p.a)(this,t),this.radius=void 0,this.theta=void 0,this.radius=n,this.theta=t.unspin(e)}return Object(h.a)(t,[{key:"toString",value:function(){return"(r".concat(this.radius,",\u2220").concat(this.theta/L,"\u03c4)")}},{key:"plus",value:function(n){var e=this.radius,r=this.theta,a=n.radius,o=n.theta;return new t(Math.sqrt(e*e+a*a+2*e*a*Math.cos(o-r)),r+Math.atan2(a*Math.sin(o-r),e+a*Math.cos(o-r)))}},{key:"minus",value:function(t){return this.plus(t.rotate(A))}},{key:"rotate",value:function(n){return new t(this.radius,this.theta+n)}},{key:"distanceFrom",value:function(t){return this.minus(t).radius}},{key:"angleFrom",value:function(t){return this.minus(t).theta}},{key:"angleTo",value:function(t){return t.minus(this).theta}},{key:"scale",value:function(n){return new t(this.radius*n,this.theta)}},{key:"d3theta",get:function(){return t.unspin(-this.theta+A/2)}},{key:"x",get:function(){return this.radius*Math.cos(this.theta)}},{key:"y",get:function(){return-this.radius*Math.sin(this.theta)}}],[{key:"unspin",value:function(t){return t-2*Math.floor(t/(2*A))*A}}]),t}(),M=function(t){return 40*t.x},_=function(t){return 40*t.y},I=1.5,x=[{x:-I,y:-7},{x:I,y:-7},{x:I,y:6},{x:-I,y:6},{x:-I,y:-7}],D=[{x:-I,y:0},{x:-I,y:4}],B=y.c().x(M).y(_),R=function(t,n){t.call(function(t){return t.attr("transform",function(t){var e=t.plane.position;return"translate(".concat(n.get(e).x,", ").concat(n.get(e).y,") scale(1)")})}).selection().call(function(t){return t.append("path").attr("d",B(x))}).call(function(t){return t.append("path").attr("stroke-width",3).attr("d",B(D))}).call(function(t){return t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",-260).text(function(t){return t.plane.position})}).selectAll("g").data(function(t){var n=t.plane;return t.slots.map(function(t){return Object(g.a)({},t,n.slots[t.planeSlotId])})},function(t){return t.formationSlotId.toString()}).join(function(t){return t.append("g").call(function(t){return t.append("circle").attr("cx",M).attr("cy",_).attr("r",16)}).call(function(t){return t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",M).attr("y",_).text(function(t){return t.formationSlotId+1})})},function(t){return t.call(function(t){return t.select("circle").attr("cx",M).attr("cy",_)}).call(function(t){return t.select("text").attr("x",M).attr("y",_)})},function(t){return t.remove()})},P=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t){var n=function(t){var n=t.planes,e=t.viewConfig.show,r=t.formation.radius;switch(e){case k.FORMATION:return{planes:[],positionToCoordinate:new Map};case k.PLANES:var a=n.map(function(t){return t.position});return{planes:n,positionToCoordinate:new Map([T.LT,T.LEAD,T.RT].filter(function(t){return a.includes(t)}).map(function(t,n,e){var r=300*n-150*(e.length-1);return[t,new N(Math.abs(r),r>=0?0:A)]}))};case k.BOTH:var o=new Map(n.map(function(t){var n=t.position,e=t.theta;return[n,new N(80*(r+3),n===T.LEAD?L/12:e)]}));return{planes:n,positionToCoordinate:o}}}(t),e=n.planes,r=n.positionToCoordinate,a=e.map(function(n,e){return{plane:n,slots:t.slots.filter(function(t){var n=t.planeId;return e===n})}}),o=this.group.selectAll("g.plane").data(a,function(t){return t.plane.position});o.transition().duration(1e3).call(R,r),o.enter().append("g").attr("class","plane").attr("transform","translate(0,0) scale(0)").transition().duration(1e3).call(R,r),o.exit().transition().duration(1e3).attr("transform","translate(0,0) scale(0)").remove()}}]),n}(O),C=function(t){var n=t.position,e=t.dockAngle,r=n.scale(80);return y.a()({outerRadius:r.radius,innerRadius:r.radius,startAngle:r.d3theta-e,endAngle:r.d3theta+e})},F=function(t){return t.position.scale(80).x},U=function(t){return t.position.scale(80).y},z=function(t){return"translate(".concat(t.offset.scale(80).x,",").concat(t.offset.scale(80).y,")")},H=function(t,n,e){t.append("path").attr("class","grips").attr("d",C),t.append("circle").attr("cx",F).attr("cy",U).attr("r",16).style("fill",function(t){return n(t)}),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",F).attr("y",U).text(e)},Y=function(t,n,e,r){var a=[];t.filter(function(t,n,e){var a=r.get(e[n]);return F(t)!==F(a)||U(t)!==U(a)}).each(function(t){var n=t.slotNum;return a.push(n)});var o=a.sort().reduce(function(t,n,e){return t[n]=e,t},{}),i=t.delay(function(t){return 10*o[t.slotNum]||0});i.attr("transform",function(t){return z(t)+" scale(1)"}),i.select("path").attr("d",C),i.select("circle").attr("cx",F).attr("cy",U).style("fill",n),i.select("text").attr("x",F).attr("y",U).text(e)},G=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t){var n=t.formation,e=t.planes,r=t.slots,a=t.viewConfig,o=a.colorBy,i=a.numberBy,u=a.show===k.PLANES?[]:r.map(function(t){var r=t.formationSlotId,a=t.planeId;return Object(g.a)({slotNum:r},n.slots[r],{plane:e[a].position})}),s=new Set(u.map(function(t){return t.buildOrder})).size,l={DEFAULT:function(){return null},BUILD_ORDER:function(t){return y.f(y.g).domain((n=s,y.e(n).map(function(t){return t.toString()})))((t.buildOrder-1).toString());var n},PLANE:function(t){return y.f(y.g.filter(function(t,n){return[0,2,4].includes(n)})).domain([T.LEAD,T.LT,T.RT])(t.plane)}}[o],c={SLOT_NUM:function(t){return t.slotNum+1},BUILD_ORDER:function(t){return t.buildOrder}}[i],f=y.d(),p=this.group.selectAll("g.slot").each(function(t,n,e){f.set(e[n],t)}).data(u,function(t){return t.slotNum.toString()}),h=y.i().duration(1e3);p.transition(h).call(Y,l,c,f),p.enter().append("g").attr("class","slot").attr("transform","translate(0,0) scale(0)").transition(h).attr("transform",function(t){return z(t)+" scale(1)"}).selection().call(H,l,c),p.exit().transition(h).attr("transform","translate(0,0) scale(0)").remove()}}]),n}(O),V=function(t){function n(){var t,e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(a)))).svg=void 0,e.allGrp=void 0,e.zoom=void 0,e.formationDrawer=void 0,e.planesDrawer=void 0,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"height",value:function(){return parseInt(this.svg.style("height"),10)}},{key:"width",value:function(){return parseInt(this.svg.style("width"),10)}},{key:"componentDidMount",value:function(){var t=this;this.allGrp=this.svg.append("g"),this.zoom=y.j().scaleExtent([.5,2]).on("zoom",function(){return t.allGrp.attr("transform",y.b.transform)}),this.svg.call(this.zoom).call(this.zoom.translateBy,this.width()/2,this.height()/2),this.formationDrawer=(new G).withGroup(this.allGrp.append("g")),this.formationDrawer.draw(this.props),this.planesDrawer=(new P).withGroup(this.allGrp.append("g")),this.planesDrawer.draw(this.props)}},{key:"componentDidUpdate",value:function(){this.formationDrawer.draw(this.props),this.planesDrawer.draw(this.props)}},{key:"render",value:function(){var t=this;return o.a.createElement("svg",{width:"100%",height:"100%",ref:function(n){return t.svg=y.h(n)}})}}]),n}(o.a.Component),K=e(51),W=e(81),q=e(18);function J(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);return Math.abs(t-n)<e}var Z=function(t,n,e){if(t.length!==n.length)throw new Error("as and bs have diff lenghts");var r=function(t,n){if("object"===typeof n){var e=n;n=function(t,n){return e[t][n]}}var r,a,o=0;for(r=0;r<t;r++)for(a=0;a<t;a++)o+=n(r,a);var i,u,s,l,c,f,p,h,d,m,v,y,g,O,E,b,S,w,k,j,T=o/t*1e4,A=o/t/1e4,L=new Int32Array(t),N=new Int32Array(t),M=new Float64Array(t),_=new Float64Array(t),I=0,x=new Int32Array(t),D=new Int32Array(t),B=new Int32Array(t),R=new Float64Array(t),P=new Int32Array(t);for(u=0;u<t;u++)B[u]=0;for(d=t;d--;){for(b=n(0,d),s=0,u=1;u<t;u++)n(u,d)<b&&(b=n(u,d),s=u);_[d]=b,1===++B[s]?(L[s]=d,N[d]=s):_[d]<_[L[s]]?(m=L[s],L[s]=d,N[d]=s,N[m]=-1):N[d]=-1}for(u=0;u<t;u++)if(0===B[u])x[I++]=u;else if(1===B[u]){for(m=L[u],b=T,d=0;d<t;d++)d!==m&&n(u,d)-_[d]<b+A&&(b=n(u,d)-_[d]);_[m]=_[m]-b}var C=0;do{for(C++,p=0,l=I,I=0;p<l;){for(u=x[p],p++,w=n(u,0)-_[0],m=0,k=T,d=1;d<t;d++)(S=n(u,d)-_[d])<k&&(S>=w?(k=S,v=d):(k=w,w=S,v=m,m=d));f=N[m],w<k+A?_[m]=_[m]-(k+A-w):f>-1&&(m=v,f=N[v]),L[u]=m,N[m]=u,f>-1&&(w<k?x[--p]=f:x[I++]=f)}}while(C<2);for(c=0;c<I;c++){for(h=x[c],d=t;d--;)R[d]=n(h,d)-_[d],P[d]=h,D[d]=d;O=0,E=0,i=!1;do{if(E===O){for(g=O-1,b=R[D[E++]],p=E;p<t;p++)(S=R[d=D[p]])<=b&&(S<b&&(E=O,b=S),D[p]=D[E],D[E++]=d);for(p=O;p<E;p++)if(N[D[p]]<0){y=D[p],i=!0;break}}if(!i)for(m=D[O],O++,S=n(u=N[m],m)-_[m]-b,p=E;p<t;p++)if((j=n(u,d=D[p])-_[d]-S)<R[d]){if(P[d]=u,j===b){if(N[d]<0){y=d,i=!0;break}D[p]=D[E],D[E++]=d}R[d]=j}}while(!i);for(p=g+1;p--;)_[m=D[p]]=_[m]+R[m]-b;do{u=P[y],N[y]=u,m=y,y=L[u],L[u]=m}while(u!==h)}var F=0;for(u=t;u--;)d=L[u],M[u]=n(u,d)-_[d],F+=n(u,d);return{cost:F,row:L,col:N,u:M,v:_}}(t.length,function(t,n,e){var r=new Map;return function(a,o){var i="".concat(a,".").concat(o);if(!r.has(i)){var u=t[a],s=n[o];r.set(i,e(u,s))}return r.get(i)}}(t,n,e));return Array.from(r.row).map(function(e,r){return[t[r],n[e]]})};var $=function(t,n,e){return Z(e,y.e(t.filledSlots),function(e,r){var a=n.slots[e],o=a.reverseBuildOrder,i=t.slots[r].jr,u=a.offset.plus(a.position).y;return Math.abs(i)*o*100-u*i}).map(function(t){var n=Object(W.a)(t,2);return{formationSlotId:n[0],planeSlotId:n[1]}})};var Q=function(){function t(n,e){if(Object(p.a)(this,t),this.slots=void 0,this.slotNumOffset=void 0,n<0)throw new Error("slots should be non-negative, was ".concat(n));this.slots=n,this.slotNumOffset=e}return Object(h.a)(t,[{key:"checkSlot",value:function(t){if(t<0||t>=this.slots)throw new Error("slot should be in [0, ".concat(this.slots,"), was ").concat(t))}},{key:"slotData",value:function(t){return this.checkSlot(t),{offset:this.position(),position:this.slotPosition(t),dockAngle:this.dockAngle(),buildOrder:this.buildOrder(t)+this.waiting()}}},{key:"allSlots",value:function(){var t=this;return Object(y.e)(this.slots).map(function(n){return t.slotData(n)})}},{key:"slotPosition",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.checkSlot(t);var e=new N(this.radius(),this.rotation()-2*t*this.dockAngle());return n?e.plus(this.position()):e}},{key:"dockPosition",value:function(t){return this.checkSlot(t),this.slotPosition(t).rotate(-this.dockAngle()).plus(this.position())}},{key:"waiting",value:function(){return Math.max.apply(Math,Object(q.a)(this.parents().map(function(t){return t.waiting()+t.maxBuildOrder()})).concat([0]))}}]),t}(),X=function(t){function n(t,e,r,a){var o;return Object(p.a)(this,n),(o=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).left=void 0,o.right=void 0,o.firstRun=void 0,o._prrd=void 0,o.left=r,o.right=a,o.firstRun=!0,o}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return Array.from(new Set([this.left.c,this.right.c]))}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"maxBuildOrder",value:function(){return Math.ceil(this.slots/2)}},{key:"buildOrder",value:function(t){return this.checkSlot(t),Math.min(t+1,this.slots-t)}},{key:"prrd",get:function(){return this._prrd||(this._prrd=n._positionRadiusRotationDockAngle(this.left.c.dockPosition(this.left.s),this.right.c.dockPosition(this.right.s),this.slots)),this._prrd}}],[{key:"_positionRadiusRotationDockAngle",value:function(t,e,r){var a=t.distanceFrom(e),o=n.__computeRadiusTheta(r,a),i=o.radius,u=o.theta,s=t.angleTo(e),l=t.plus(new N(i,s-(A-u)/2)),c=(L-u)/(2*r),f=l.angleTo(e)-c;return{position:l,radius:i,rotation:f,dockAngle:c}}},{key:"__computeRadiusTheta",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);if(n<0||n>t)throw console.error("d: ".concat(n,", s: ").concat(t)),new Error("d must be in [0, s]");var r=0;function a(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(r>=100)throw new Error("didn't converge");r+=1;var u=(i+o)/2,s=n/(2*Math.sin(u/2))*(L-u);return Math.abs(s-t)<e?u:s>t?a(u,i):a(o,u)}var o=a();return{radius:t/(L-a()),theta:o}}}]),n}(Q),tt=function(t){function n(t,e,r,a){var o;if(Object(p.a)(this,n),(o=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).dock=void 0,o.hand=void 0,o._prrd=void 0,o.dock=r,"left"!==a&&"right"!==a)throw new Error("Hand should be 'left' or 'right'");return o.hand=a,o}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return[this.dock.c]}},{key:"_left",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.dockPosition(e):n.slotPosition(e).rotate(-3*n.dockAngle()).plus(n.position())}},{key:"_right",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.slotPosition(e).rotate(n.dockAngle()).plus(n.position()):n.dockPosition(e)}},{key:"maxBuildOrder",value:function(){return this.slots}},{key:"buildOrder",value:function(t){return this.checkSlot(t),"left"===this.hand?this.slots-t:t+1}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"prrd",get:function(){if(!this._prrd){var t=2*this.slots+1;if(this._prrd=X._positionRadiusRotationDockAngle(this._left(),this._right(),t),"left"===this.hand){var n=t-this.slots,e=this._prrd,r=e.rotation,a=e.dockAngle,o=N.unspin(r-2*n*a);this._prrd.rotation=o}}return this._prrd}}]),n}(Q),nt=function(t){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3*A/2;return Object(p.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this,t,0)))._rotation=void 0,e._rotation=r,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"rotation",value:function(){return this._rotation}},{key:"position",value:function(){return new N(0,0)}},{key:"radius",value:function(){return this.slots/L}},{key:"dockAngle",value:function(){return L/(2*this.slots)}},{key:"maxBuildOrder",value:function(){return 1}},{key:"buildOrder",value:function(t){return this.checkSlot(t),1}},{key:"parents",value:function(){return[]}}]),n}(Q),et=function(){function t(){Object(p.a)(this,t),this._slots=void 0}return Object(h.a)(t,[{key:"slots",get:function(){return this._slots||(this._slots=this.computeSlots()),this._slots}}]),t}(),rt=function t(n,e){var r=Math.round(n/2),a=r>2;return 0===e?n:1===e?n+5*r:2===e?n+10*r:3===e?t(n,e-1)+(a?3*r:5*r):4===e?t(n,e-1)+(a?5*r:5*n):t(n,4)+(e-4)*(a?5*r:5*n)},at=function t(n,e,r){var a=r.length-1,o=Math.min(n,rt(e,a+1))-rt(e,a);if(o<=0)return r;var i=function(t,n){if(n.length>10)throw new Error("somethings fucky");var e=4!==t;if(1===n.length){var r=n[0][0];return Array.from(new Array(t/2).keys()).map(function(t){return 2*t}).map(function(n){return{left:{c:r,s:n},right:{c:r,s:(n+t-1)%t}}})}if(!e||2===n.length||4===n.length||n.length>=6)return n[n.length-1].map(function(t){var n=5===t.slots;return{left:{c:t,s:1+(n?1:0)},right:{c:t,s:0+(n?1:0)}}});if(e&&3===n.length){var a=n[1],o=a.length;return Array.from(new Array(o).keys()).map(function(t){return{left:{c:a[(t+1)%o],s:0},right:{c:a[t],s:3}}})}if(e&&5===n.length){var i=n[2],u=n[4];return i.flatMap(function(t,n){return[t,u[n]]}).map(function(t){return{left:{c:t,s:5===t.slots?2:1},right:{c:t,s:5===t.slots?1:0}}})}throw new Error("mmm")}(e,r),u=i.length,s=Math.floor(o/u),l=o%u,c=i.flatMap(function(t,n){var r=t.left,o=t.right,i=s+(n<l?1:0),u=r.c===o.c?5:3,c=rt(e,a)+s*n+Math.min(l,n);if(i===u)return[new X(u,c,r,o)];var f=Math.floor(i/2),p=f+i%2,h=[];return f>0&&h.push(new tt(f,c+p,r,"left")),p>0&&h.push(new tt(p,c,o,"right")),h});return t(n,e,[].concat(Object(q.a)(r),[c]))},ot=function(t){function n(t){var e;return Object(p.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this))).components=void 0,e.components=t,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){var t=this.reverseBuildOrder();return this.components.flatMap(function(t){return t.allSlots()}).map(function(n,e){return Object(g.a)({},n,{reverseBuildOrder:t[e]})})}},{key:"reverseBuildOrder",value:function(){var t=new Map(this.components.map(function(t){return[t,[]]}));this.components.flatMap(function(t){return t.parents().map(function(n){return{parent:n,child:t}})}).forEach(function(n){var e=n.parent,r=n.child;return t.get(e).push(r)});var n=new Map,e=function e(r){if(!n.has(r)){var a=t.get(r),o=Math.max.apply(Math,Object(q.a)(a.map(function(t){return e(t)+t.maxBuildOrder()})).concat([0]));n.set(r,o)}return n.get(r)};return e(this.components[0]),this.components.flatMap(function(t){return Array.from(new Array(t.slots).keys()).map(function(n){return e(t)+t.maxBuildOrder()-t.buildOrder(n)})})}},{key:"baseIds",get:function(){return this.components.find(function(t){return t instanceof nt}).allSlots().map(function(t,n){return n})}},{key:"radius",get:function(){var t=this.slots.map(function(t){var n=t.position,e=t.offset;return n.plus(e).radius});return Math.max.apply(Math,Object(q.a)(t))}}]),n}(et);var it=Object(K.a)([function(t){return t.formationConfig},function(t){return t.planesConfig}],function(t,n){var e=n.filter(function(t){return t.type!==b.NONE}).map(function(t){var n=t.slotting,e=t.slots;return{planeMin:n===E.FILL?e:0,planeMax:e}}).reduce(function(t,n){var e=t.min,r=t.max;return{min:e+n.planeMin,max:r+n.planeMax}},{min:0,max:0}),r=e.min,a=e.max,o=Math.max(r,t.baseSize);return{min:o,max:a,slots:Math.max(Math.min(t.slots,a),o)}}),ut=function(t){function n(){var t,e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(a)))).jrOffset=1,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){var t=this,n=y.e(7).map(function(n){return{x:-2,y:5.5-n,jr:-n+t.jrOffset+8}}),e=y.e(3).map(function(n){return{x:-1,y:3-n,jr:-n+t.jrOffset+1}}),r=y.e(2).map(function(n){return{x:0,y:2.5-n,jr:-n+t.jrOffset+-2}}),a=y.e(6).flatMap(function(n){return[{x:-.5,y:-.5-n,jr:-2*n+t.jrOffset-5},{x:.5,y:-.5-n,jr:-2*n+t.jrOffset-4}]});return[].concat(Object(q.a)(n),Object(q.a)(e),Object(q.a)(r),Object(q.a)(a))}}]),n}(function(t){function n(t,e){var r;return Object(p.a)(this,n),(r=Object(d.a)(this,Object(m.a)(n).call(this))).position=void 0,r.filledSlots=void 0,r.position=t,r.filledSlots=e,r}return Object(v.a)(n,t),Object(h.a)(n,[{key:"theta",get:function(){switch(this.position){case T.LEAD:return 3*L/12;case T.LT:return 7*L/12;case T.RT:return 11*L/12}}}]),n}(et)),st=function(t){return t.reduce(function(t,n){return t+n.filledSlots},0)},lt=function(t,n,e){var r=e.filter(function(t){var n=t.type,e=t.slotting;return n!==b.NONE&&e===E.FILL}).map(function(t){return{position:t.position,filledSlots:t.slots}});return function t(n,e,r,a){if(0===n.length)return a;var o=e/n.length,i=n.find(function(t){return t.position===T.LEAD});if(i&&r>o)return t(n.filter(function(t){return t.position!==T.LEAD}),e-r,r,[{position:T.LEAD,filledSlots:r}].concat(Object(q.a)(a)));var u=n.filter(function(t){return t.slots<o}).map(function(t){return{position:t.position,filledSlots:t.slots}});if(u.length){var s=u.map(function(t){return t.position});return t(n.filter(function(t){var n=t.position;return!s.includes(n)}),e-st(u),r,[].concat(Object(q.a)(a),Object(q.a)(u)))}var l=Math.floor(o),c=e%l;if(c>0&&i){var f={position:T.LEAD,filledSlots:l};return t(n.filter(function(t){return t.position!==T.LEAD}),e-l,r,[f].concat(Object(q.a)(a)))}var p=n.map(function(t,n){return{position:t.position,filledSlots:l+(c>n?1:0)}});return[].concat(Object(q.a)(a),Object(q.a)(p))}(e.filter(function(t){var n=t.type,e=t.slotting;return n!==b.NONE&&e!==E.FILL}),t-st(r),n,r)},ct=function(t){return it(t).slots},ft=function(t){return t.formationConfig.baseSize},pt=Object(K.a)([ct,ft],function(t,n){return new ot(at(t,n,[[new nt(n)]]).flat())}),ht=Object(K.a)([ct,ft,function(t){return t.planesConfig.filter(function(t){return t.type!==b.NONE})}],function(t,n,e){var r=new Map(lt(t,n,e).map(function(t){return[t.position,t.filledSlots]}));return e.map(function(t){var n=t.position,e=t.type;return function(t,n,e){switch(e){case b.OTTER:return new ut(t,n);case b.SKYVAN:throw new Error("SKYVAN not implemented");case b.NONE:throw new Error("PLaneType is NONE")}}(n,r.get(n),e)})}),dt=Object(K.a)([pt,ht],function(t,n){return function(t,n,e){return n.flatMap(function(n,r){var a=e.filter(function(t){return t.planeId===r}).map(function(t){return t.formationSlotId});return $(n,t,a).map(function(t){return Object(g.a)({planeId:r},t)})})}(t,n,function(t,n){var e;if(n[0].position!==T.LEAD)throw new Error("lead plane should be first");var r=n.map(function(){return[]});(e=r[0]).push.apply(e,Object(q.a)(t.baseIds));var a=Array.from(t.slots.keys()).filter(function(t){return!r.flat().includes(t)}),o=n.flatMap(function(t,n){var e=t.filledSlots-r[n].length;return Array(e).fill(n)});return Z(a,o,function(e,r){var a=t.slots[e],o=n[r],i=a.position.plus(a.offset),u=N.unspin(i.theta-o.theta),s=N.unspin(a.offset.theta-A/2),l=J(s,0)||J(s,A)?T.LEAD:s>A?T.RT:T.LT,c=l===T.LEAD||o.position===T.LEAD||l===o.position?0:A;return Math.min(u,2*A-u)+c}).forEach(function(t){var n=Object(W.a)(t,2),e=n[0],a=n[1];return r[a].push(e)}),r.flatMap(function(t,n){return t.map(function(t){return{formationSlotId:t,planeId:n}})})}(t,n))}),mt=Object(s.b)(function(t){return{formation:pt(t),planes:ht(t),slots:dt(t),viewConfig:t.viewConfig}})(V),vt=e(316),yt=e(110),gt=e(315),Ot=Object(s.b)(function(t){return{slotsOptions:it(t),baseSize:t.formationConfig.baseSize}},function(t){return{onFormationSlotsSet:function(n){return t(function(t){return{type:"SET_FORMATION_SLOTS",slots:t}}(n))},onBaseSizeSet:function(n){return t({type:"SET_BASE_SIZE",baseSize:n})}}})(function(t){var n=t.slotsOptions,e=n.min,r=n.max,a=n.slots,i=t.baseSize,u=t.onFormationSlotsSet,s=t.onBaseSizeSet,l=o.a.createElement("span",null,o.a.createElement(yt.a,{name:"users"})," ",o.a.createElement("strong",null,"Slots:")," ",a);return o.a.createElement(gt.a,{trigger:l,pointing:!0,className:"link item"},o.a.createElement(gt.a.Menu,null,o.a.createElement(gt.a.Item,null,o.a.createElement("span",null,e," "),o.a.createElement("input",{type:"range",value:a,min:e,max:r,onChange:function(t){return u(parseInt(t.target.value))}}),o.a.createElement("span",null," ",r)),o.a.createElement(gt.a.Item,null,o.a.createElement(gt.a,{trigger:o.a.createElement("span",null,o.a.createElement("strong",null,"Base Size"),": ",i)},o.a.createElement(gt.a.Menu,null,[4,6,8,10].map(function(t){return o.a.createElement(gt.a.Item,{key:t,onClick:function(){return s(t)},active:i===t},t)}))))))}),Et=e(59),bt=function(t){var n,e=t.planeConfig,r=t.setters,a=e.position,i=e.label,u=e.slotting,s=e.type,l=e.slots,c=r.onPlaneSlottingSet,f=r.onPlaneTypeSet,p=r.onPlaneSlotsSet,h=o.a.createElement("div",null,o.a.createElement("strong",null,i),": ",s,s!==b.NONE?", ".concat(l," slots, ").concat(u===E.FILL?"filled":"slotted evenly"):null),d=a===T.LEAD?[b.OTTER,b.SKYVAN]:[b.OTTER,b.SKYVAN,b.NONE],m=E.FILL,v=E.SPLIT,y=(n={},Object(Et.a)(n,m,"Fill plane"),Object(Et.a)(n,v,"Split evenly"),n),g=[v,m];return o.a.createElement(gt.a.Item,null,o.a.createElement(gt.a,{trigger:h,fluid:!0},o.a.createElement(gt.a.Menu,null,o.a.createElement(gt.a.Header,null,"Type"),d.map(function(t){return o.a.createElement(gt.a.Item,{key:t,onClick:function(){return f(a,t)},active:s===t},t)}),o.a.createElement(gt.a.Divider,null),o.a.createElement(gt.a.Header,null,"Slotting"),g.map(function(t){return o.a.createElement(gt.a.Item,{key:t,onClick:function(){return c(a,t)},active:u===t},y[t])}),o.a.createElement(gt.a.Divider,null),o.a.createElement(gt.a.Header,null,"Slots: ",l),o.a.createElement(gt.a.Item,null,o.a.createElement("span",null,"0 "),o.a.createElement("input",{type:"range",value:l,min:0,max:30,onChange:function(t){return p(a,parseInt(t.target.value))}}),o.a.createElement("span",null," ",30)))))},St=Object(s.b)(function(t){return{planesConfig:t.planesConfig}},function(t){return{setters:{onPlaneTypeSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_TYPE",position:t,planeType:n}}(n,e))},onPlaneSlotsSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTS",position:t,slots:n}}(n,e))},onPlaneSlottingSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTTING",position:t,slotting:n}}(n,e))}}}})(function(t){var n=t.planesConfig,e=t.setters,r=n.filter(function(t){return t.type!==b.NONE}).length,a=o.a.createElement("span",null,o.a.createElement(yt.a,{name:"plane"})," ",o.a.createElement("strong",null,"Planes:")," ",r);return o.a.createElement(gt.a,{trigger:a,item:!0},o.a.createElement(gt.a.Menu,null,n.map(function(t){return o.a.createElement(bt,{key:t.position,planeConfig:t,setters:e})})))}),wt=Object(s.b)(function(t){return{viewConfig:t.viewConfig}},function(t){return{onSetColorBy:function(n){return t(function(t){return{type:"SET_COLOR_BY",colorBy:t}}(n))},onSetNumberBy:function(n){return t(function(t){return{type:"SET_NUMBER_BY",numberBy:t}}(n))},onSetShow:function(n){return t(function(t){return{type:"SET_SHOW",show:t}}(n))}}})(function(t){var n=t.viewConfig,e=t.onSetColorBy,r=t.onSetNumberBy,a=t.onSetShow,i=o.a.createElement("span",null,o.a.createElement(yt.a,{name:"eye"})," ",o.a.createElement("strong",null,"View")),u=[{opt:S.DEFAULT,desc:"Default"},{opt:S.PLANE,desc:"Plane"},{opt:S.BUILD_ORDER,desc:"Build Order"}].map(function(t){var r=t.opt,a=t.desc;return o.a.createElement(gt.a.Item,{key:r,onClick:function(){return e(r)},active:n.colorBy===r},a)}),s=[{opt:w.SLOT_NUM,desc:"Slot Number"},{opt:w.BUILD_ORDER,desc:"Build Order"}].map(function(t){var e=t.opt,a=t.desc;return o.a.createElement(gt.a.Item,{key:e,onClick:function(){return r(e)},active:n.numberBy===e},a)}),l=[{opt:k.FORMATION,desc:"Formation"},{opt:k.PLANES,desc:"Planes"},{opt:k.BOTH,desc:"Formation & Planes"}].map(function(t){var e=t.opt,r=t.desc;return o.a.createElement(gt.a.Item,{key:e,onClick:function(){return a(e)},active:n.show===e},r)});return o.a.createElement(gt.a,{trigger:i,item:!0},o.a.createElement(gt.a.Menu,null,o.a.createElement(gt.a.Header,null,"Color by"),u,o.a.createElement(gt.a.Divider,null),o.a.createElement(gt.a.Header,null,"Number by"),s,o.a.createElement(gt.a.Divider,null),o.a.createElement(gt.a.Header,null,"Show"),l))}),kt=function(){return o.a.createElement(vt.a,{size:"mini",secondary:!0},o.a.createElement(Ot,null),o.a.createElement(St,null),o.a.createElement(wt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jt=T.LEAD,Tt=T.LT,At=T.RT,Lt=[{position:jt,label:"Lead",slotting:E.SPLIT,type:b.OTTER,slots:23},{position:Tt,label:"Left Trail",slotting:E.SPLIT,type:b.NONE,slots:23},{position:At,label:"Right Trail",slotting:E.SPLIT,type:b.OTTER,slots:23}],Nt=Object(l.combineReducers)({planesConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,n=arguments.length>1?arguments[1]:void 0,e=n.position;return t.map(function(t){if(t.position!==e)return t;switch(n.type){case"SET_PLANE_SLOTTING":return Object(g.a)({},t,{slotting:n.slotting});case"SET_PLANE_SLOTS":return Object(g.a)({},t,{slots:n.slots});case"SET_PLANE_TYPE":return Object(g.a)({},t,{type:n.planeType});default:return t}})},formationConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slots:42,baseSize:6,type:j.HD},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_FORMATION_SLOTS":return Object(g.a)({},t,{slots:n.slots});case"SET_BASE_SIZE":return Object(g.a)({},t,{baseSize:n.baseSize});case"SET_FORMATION_TYPE":return Object(g.a)({},t,{type:n.formationType});default:return t}},viewConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{colorBy:S.PLANE,numberBy:w.SLOT_NUM,show:k.BOTH},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_COLOR_BY":return Object(g.a)({},t,{colorBy:n.colorBy});case"SET_NUMBER_BY":return Object(g.a)({},t,{numberBy:n.numberBy});case"SET_SHOW":return Object(g.a)({},t,{show:n.show});default:return t}}}),Mt=Object(l.createStore)(Nt,Object(c.composeWithDevTools)());u.a.render(o.a.createElement(s.a,{store:Mt},o.a.createElement(function(){return o.a.createElement(f.a,{fluid:!0,style:{marginTop:"10px",height:"100vh"}},o.a.createElement(kt,null),o.a.createElement(mt,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[174,1,2]]]);
//# sourceMappingURL=main.f442d7f7.chunk.js.map