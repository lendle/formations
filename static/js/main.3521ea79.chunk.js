(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{235:function(t,n,e){t.exports=e(383)},277:function(t,n,e){},383:function(t,n,e){"use strict";e.r(n);var r=e(25);Object(r.b)();var o,a=e(0),i=e.n(a),u=e(20),s=e.n(u),l=e(31),c=e(38),f=e(156),p=e(18),h=e(12),d=e(22),m=e(21),v=e(23),y=e(5),b=(e(277),e(27)),O=function(){function t(){Object(p.a)(this,t),this.group=void 0}return Object(h.a)(t,[{key:"withGroup",value:function(t){return this.group=t,this}}]),t}(),g=e(87);!function(t){t.LEAD="lead",t.LT="lt",t.RT="rt"}(o||(o={}));var S,E,w,j,T,k,A=o;!function(t){t[t.SPLIT=0]="SPLIT",t[t.FILL=1]="FILL"}(S||(S={})),function(t){t[t.NONE=0]="NONE",t[t.OTTER=1]="OTTER",t[t.SKYVAN=2]="SKYVAN"}(E||(E={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.PLANE=1]="PLANE",t[t.BUILD_ORDER=2]="BUILD_ORDER",t[t.RADIAL=3]="RADIAL"}(w||(w={})),function(t){t[t.SLOT_NUM=0]="SLOT_NUM",t[t.SLOT_NUM_BY_PLANE=1]="SLOT_NUM_BY_PLANE",t[t.BUILD_ORDER=2]="BUILD_ORDER"}(j||(j={})),function(t){t[t.FORMATION=0]="FORMATION",t[t.PLANES=1]="PLANES",t[t.BOTH=2]="BOTH"}(T||(T={})),function(t){t[t.HD=0]="HD",t[t.HD_ABOVE=1]="HD_ABOVE",t[t.HU=2]="HU"}(k||(k={}));var L,x,N=Math.PI,I=2*N,_=function(){function t(n,e){Object(p.a)(this,t),this.radius=void 0,this.theta=void 0,this.radius=n,this.theta=t.unspin(e)}return Object(h.a)(t,[{key:"toString",value:function(){return"(r".concat(this.radius,",\u2220").concat(this.theta/I,"\u03c4)")}},{key:"plus",value:function(n){var e=this.radius,r=this.theta,o=n.radius,a=n.theta;return new t(Math.sqrt(e*e+o*o+2*e*o*Math.cos(a-r)),r+Math.atan2(o*Math.sin(a-r),e+o*Math.cos(a-r)))}},{key:"minus",value:function(t){return this.plus(t.rotate(N))}},{key:"rotate",value:function(n){return new t(this.radius,this.theta+n)}},{key:"flip",value:function(n){return new t(this.radius,-this.theta-2*n)}},{key:"distanceFrom",value:function(t){return this.minus(t).radius}},{key:"angleFrom",value:function(t){return this.minus(t).theta}},{key:"angleTo",value:function(t){return t.minus(this).theta}},{key:"scale",value:function(n){return new t(this.radius*n,this.theta)}},{key:"d3theta",get:function(){return t.unspin(-this.theta+N/2)}},{key:"x",get:function(){return this.radius*Math.cos(this.theta)}},{key:"y",get:function(){return-this.radius*Math.sin(this.theta)}}],[{key:"unspin",value:function(t){return t-2*Math.floor(t/(2*N))*N}}]),t}(),M=e(19),D=e(8),B=40,R=(L={},Object(D.a)(L,A.LEAD,"Lead"),Object(D.a)(L,A.LT,"Left Trail"),Object(D.a)(L,A.RT,"Right Trail"),L),P=1.5,C=6.5,F=y.e().x(function(t){return t.x*B}).y(function(t){return t.y*B}),U=function(){function t(){var n=this;Object(p.a)(this,t),this.otterPoints=[{x:-P,y:-C},{x:P,y:-C},{x:P,y:C},{x:-P,y:C},{x:-P,y:-C}],this.doorPoints=[{x:-P,y:C-6},{x:-P,y:C-2}],this.slotCoords=[].concat(Object(M.a)(y.f(7).map(function(t){return{x:-2,y:6-t}})),Object(M.a)(y.f(3).map(function(t){return{x:-1,y:3.5-t}})),Object(M.a)(y.f(2).map(function(t){return{x:0,y:3-t}})),Object(M.a)(y.f(6).flatMap(function(t){return[{x:.5,y:-t},{x:-.5,y:-t}]}))),this.x=function(t){return n.slotCoords[t.planeSlotId].x*B},this.y=function(t){return n.slotCoords[t.planeSlotId].y*B}}return Object(h.a)(t,[{key:"draw",value:function(t){t.append("path").attr("d",F(this.otterPoints)),t.append("path").attr("stroke-width",3).attr("d",F(this.doorPoints)),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",(.5-C)*B).text(function(t){return R[t.plane.position]})}}]),t}(),H=function(){function t(){var n=this;Object(p.a)(this,t),this.skyvanPoints=[{x:-P,y:-C},{x:P,y:-C},{x:P,y:C},{x:-P,y:C},{x:-P,y:-C}],this.doorPoints=[{x:-P,y:C},{x:P,y:C}],this.redLine=[{x:-P,y:C-4},{x:P,y:C-4}],this.slotCoords=[].concat(Object(M.a)(y.f(3).flatMap(function(t){return[{x:-1,y:6-t},{x:0,y:6-t},{x:1,y:6-t}]})),Object(M.a)(y.f(8).flatMap(function(t){return[{x:-.5,y:2-t},{x:.5,y:2-t}]}))),this.x=function(t){return n.slotCoords[t.planeSlotId].x*B},this.y=function(t){return n.slotCoords[t.planeSlotId].y*B}}return Object(h.a)(t,[{key:"draw",value:function(t){t.append("path").attr("d",F(this.skyvanPoints)),t.append("path").attr("stroke-width",3).attr("d",F(this.doorPoints)),t.append("path").attr("stroke-width",2).style("stroke","red").attr("d",F(this.redLine)),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",(1-C)*B).text(function(t){return R[t.plane.position]})}}]),t}(),Y=(x={},Object(D.a)(x,E.OTTER,new U),Object(D.a)(x,E.SKYVAN,new H),x),z=function(t){var n,e=t.formationSlot.buildOrder;return y.g(y.h).domain((n=12,y.f(n).map(function(t){return t.toString()})))((e-1).toString())},V=function(t){return y.g(y.h.filter(function(t,n){return[0,2,4].includes(n)})).domain([A.LEAD,A.LT,A.RT])(t.plane.position)},G=function(t){var n=t.formationSlot,e=n.offset.plus(n.position).theta/I;return y.d(e)},W=function(t){switch(t){case w.BUILD_ORDER:return z;case w.PLANE:return V;case w.RADIAL:return G;default:return function(){return null}}},K=function(t){switch(t){case j.BUILD_ORDER:return function(t){return t.formationSlot.buildOrder};case j.SLOT_NUM_BY_PLANE:return function(t){return t.byPlaneSlotId+1};default:return function(t){return t.formationSlotId+1}}},q=function(t,n){return(n===k.HD?t.flip(N/2):t).scale(80)},J=function(t){var n=t.formationSlot.position,e=t.formation.type;return q(n,e)},Z=function(t){var n=t.formationSlot.offset,e=t.formation.type;return q(n,e)},$=function(t){var n=J(t),e=t.formationSlot.dockAngle;return y.a()({outerRadius:n.radius,innerRadius:n.radius,startAngle:n.d3theta-e,endAngle:n.d3theta+e})},Q=function(t){return J(t).x},X=function(t){return J(t).y},tt=function(t){return Y[t.plane.type].x(t)},nt=function(t){return Y[t.plane.type].y(t)},et=function(t){y.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(y.b.overshoot(3)).attr("r",20)},rt=function(t){y.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(y.b.overshoot(3)).attr("r",16)},ot=function(t,n,e,r,o){return t.append("g").classed("slot",!0).on("mouseover",et).on("mouseout",rt).attr("formationSlotId",function(t){return t.formationSlotId}).call(function(t){t.append("circle").attr("r",16).call(function(t){n&&t.attr("cx",n),e&&t.attr("cy",e),r&&t.attr("fill",r)}),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").call(function(t){n&&t.attr("x",n),e&&t.attr("y",e),o&&t.text(o)})})},at=function(t,n,e,r,o){t.select("g.slot circle").attr("cx",n).attr("cy",e).attr("fill",r),t.select("g.slot text").attr("x",n).attr("y",e).text(o)},it=function(t,n){return t.transition(n).attr("transform","scale(0)").remove()},ut=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t,n){var e=function(t){var n=t.planes,e=t.viewConfig.show,r=t.formation,o=r.radius,a=r.type;switch(e){case T.FORMATION:case T.PLANES:var i=n.map(function(t){return t.position});return new Map([A.LT,A.LEAD,A.RT].filter(function(t){return i.includes(t)}).map(function(t,n,e){var r=300*n-150*(e.length-1);return[t,new _(Math.abs(r),r>=0?0:N)]}));case T.BOTH:return new Map(n.map(function(t){var n=t.position,e=t.theta,r=new _(80*Math.max(7,o+3),n===A.LEAD?I/12:e);return[n,a===k.HD?r.flip(N/2):r]}))}}(t),r=t.fill,o=t.label,a=t.viewConfig.show===T.FORMATION?[]:Array.from(Object(g.a)(t.slots,function(t){return t.plane})).map(function(t){var n=Object(b.a)(t,2);return{plane:n[0],slotData:n[1]}});this.group.selectAll("g.plane").data(a,function(t){return"".concat(t.plane.position,".").concat(t.plane.type)}).join(function(t){return t.append("g").classed("plane",!0).each(function(t,e,r){var o=t.plane;Y[o.type].draw(y.i(r[e]),n)}).attr("transform","translate(0,0) scale(0)")},void 0,function(t){return it(t,n)}).transition(n).attr("transform",function(t){var n=t.plane.position;return"translate(".concat(e.get(n).x,",").concat(e.get(n).y,") scale(1)")}).selection().selectAll("g.slot").data(function(t){return t.slotData},function(t){return"".concat(t.formationSlotId,".").concat(t.planeId,".").concat(t.plane.type)}).join(ot,void 0,function(t){return it(t,n)}).transition(n).attr("transform","scale(1)").call(function(t){at(t,tt,nt,r,function(t){return function(n){return n.formation.baseIds.includes(n.formationSlotId)?"B":t(n)}}(o))})}}]),n}(O),st=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t,n){var e=t.slots,r=t.viewConfig,o=t.fill,a=t.label,i=r.show===T.PLANES?[]:e;this.group.selectAll("g.slotgroup").data(i,function(t){return t.formationSlotId.toString()}).join(function(t){return t.append("g").attr("class","slotgroup").attr("transform","translate(0,0) scale(0)").call(function(t){t.append("path").attr("class","grips").attr("d",$),ot(t,Q,X,o,a)})},void 0,function(t){return it(t,n)}).transition(n).attr("transform",function(t){return function(t){return"translate(".concat(Z(t).x,",").concat(Z(t).y,")")}(t)+" scale(1)"}).call(function(t){t.select("path").attr("d",$),at(t,Q,X,o,a)})}}]),n}(O),lt=function(t){function n(){var t,e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(o)))).svg=void 0,e.allGrp=void 0,e.zoom=void 0,e.formationDrawer=void 0,e.planesDrawer=void 0,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"height",value:function(){return parseInt(this.svg.style("height"),10)}},{key:"width",value:function(){return parseInt(this.svg.style("width"),10)}},{key:"componentDidMount",value:function(){var t=this;this.allGrp=this.svg.append("g"),this.zoom=y.l().scaleExtent([.5,2]).on("zoom",function(){return t.allGrp.attr("transform",y.c.transform)}),this.svg.call(this.zoom).call(this.zoom.translateBy,this.width()/2,this.height()/2);var n=y.k().duration(1e3);this.formationDrawer=(new st).withGroup(this.allGrp.append("g")),this.formationDrawer.draw(this.props,n),this.planesDrawer=(new ut).withGroup(this.allGrp.append("g")),this.planesDrawer.draw(this.props,n)}},{key:"componentDidUpdate",value:function(){var t=y.k().duration(1e3);this.formationDrawer.draw(this.props,t),this.planesDrawer.draw(this.props,t)}},{key:"render",value:function(){var t=this;return i.a.createElement("svg",{width:"100%",height:"100%",ref:function(n){return t.svg=y.i(n)}})}}]),n}(i.a.Component),ct=e(48);function ft(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);return Math.abs(t-n)<e}var pt=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return function(e,r){for(var o=0;o<n.length;o++){var a=(0,n[o])(e,r);if(a)return a}return t(e,r)}}},ht=function(t,n,e){if(t.length!==n.length)throw new Error("as and bs have diff lenghts");var r=t.flatMap(function(t){return n.flatMap(function(n){var r=e(t,n);return r<0||r===1/0?[{a:t,b:n,score:r}]:[]})});r.length>0&&console.warn("Scores should be non-negative and not infinity: ",r);var o=function(t,n){if("object"===typeof n){var e=n;n=function(t,n){return e[t][n]}}var r,o,a=0;for(r=0;r<t;r++)for(o=0;o<t;o++)a+=n(r,o);var i,u,s,l,c,f,p,h,d,m,v,y,b,O,g,S,E,w,j,T,k=a/t*1e4,A=a/t/1e4,L=new Int32Array(t),x=new Int32Array(t),N=new Float64Array(t),I=new Float64Array(t),_=0,M=new Int32Array(t),D=new Int32Array(t),B=new Int32Array(t),R=new Float64Array(t),P=new Int32Array(t);for(u=0;u<t;u++)B[u]=0;for(d=t;d--;){for(S=n(0,d),s=0,u=1;u<t;u++)n(u,d)<S&&(S=n(u,d),s=u);I[d]=S,1===++B[s]?(L[s]=d,x[d]=s):I[d]<I[L[s]]?(m=L[s],L[s]=d,x[d]=s,x[m]=-1):x[d]=-1}for(u=0;u<t;u++)if(0===B[u])M[_++]=u;else if(1===B[u]){for(m=L[u],S=k,d=0;d<t;d++)d!==m&&n(u,d)-I[d]<S+A&&(S=n(u,d)-I[d]);I[m]=I[m]-S}var C=0;do{for(C++,p=0,l=_,_=0;p<l;){for(u=M[p],p++,w=n(u,0)-I[0],m=0,j=k,d=1;d<t;d++)(E=n(u,d)-I[d])<j&&(E>=w?(j=E,v=d):(j=w,w=E,v=m,m=d));f=x[m],w<j+A?I[m]=I[m]-(j+A-w):f>-1&&(m=v,f=x[v]),L[u]=m,x[m]=u,f>-1&&(w<j?M[--p]=f:M[_++]=f)}}while(C<2);for(c=0;c<_;c++){for(h=M[c],d=t;d--;)R[d]=n(h,d)-I[d],P[d]=h,D[d]=d;O=0,g=0,i=!1;do{if(g===O){for(b=O-1,S=R[D[g++]],p=g;p<t;p++)(E=R[d=D[p]])<=S&&(E<S&&(g=O,S=E),D[p]=D[g],D[g++]=d);for(p=O;p<g;p++)if(x[D[p]]<0){y=D[p],i=!0;break}}if(!i)for(m=D[O],O++,E=n(u=x[m],m)-I[m]-S,p=g;p<t;p++)if((T=n(u,d=D[p])-I[d]-E)<R[d]){if(P[d]=u,T===S){if(x[d]<0){y=d,i=!0;break}D[p]=D[g],D[g++]=d}R[d]=T}}while(!i);for(p=b+1;p--;)I[m=D[p]]=I[m]+R[m]-S;do{u=P[y],x[y]=u,m=y,y=L[u],L[u]=m}while(u!==h)}var F=0;for(u=t;u--;)d=L[u],N[u]=n(u,d)-I[d],F+=n(u,d);return{cost:F,row:L,col:x,u:N,v:I}}(t.length,function(t,n,e){var r=new Map;return function(o,a){var i="".concat(o,".").concat(a);if(!r.has(i)){var u=t[o],s=n[a];r.set(i,e(u,s))}return r.get(i)}}(t,n,e));if(!o.row.every(function(n){return n>=0&&n<t.length})||new Set(o.row).size!=t.length||o.cost===1/0){var a=t.flatMap(function(t){return n.map(function(n){return{a:t,b:n,score:e(t,n)}})});console.error("something's weird",{allScores:a,result:o})}return Array.from(o.row).map(function(e,r){return[t[r],n[e]]})};var dt=function(t,n,e){var r=function(e,r){var o=n.slots[e],a=o.reverseBuildOrder,i=t.slots[r].jr,u=o.offset.plus(o.position).y;return Math.abs(i)*a*100-u*i+1e3};return ht(e,y.f(t.filledSlots),t.position===A.LEAD?pt(function(e,r){if(t.position===A.LEAD){var o=n.baseIds.findIndex(function(t){return t===e});return r===t.baseIds[o]?0:1e4}})(r):r).map(function(t){var n=Object(b.a)(t,2);return{formationSlotId:n[0],planeSlotId:n[1]}})};var mt=e(24),vt=function(){function t(n,e){if(Object(p.a)(this,t),this.slots=void 0,this.slotNumOffset=void 0,n<0)throw new Error("slots should be non-negative, was ".concat(n));this.slots=n,this.slotNumOffset=e}return Object(h.a)(t,[{key:"checkSlot",value:function(t){if(t<0||t>=this.slots)throw new Error("slot should be in [0, ".concat(this.slots,"), was ").concat(t))}},{key:"slotData",value:function(t){return this.checkSlot(t),{offset:this.position(),position:this.slotPosition(t),dockAngle:this.dockAngle(),buildOrder:this.buildOrder(t)+this.waiting()}}},{key:"allSlots",value:function(){var t=this;return Object(y.f)(this.slots).map(function(n){return t.slotData(n)})}},{key:"slotPosition",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.checkSlot(t);var e=new _(this.radius(),this.rotation()-2*t*this.dockAngle());return n?e.plus(this.position()):e}},{key:"dockPosition",value:function(t){return this.checkSlot(t),this.slotPosition(t).rotate(-this.dockAngle()).plus(this.position())}},{key:"waiting",value:function(){return Math.max.apply(Math,Object(M.a)(this.parents().map(function(t){return t.waiting()+t.maxBuildOrder()})).concat([0]))}}]),t}(),yt=function(t){function n(t,e,r,o){var a;return Object(p.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).left=void 0,a.right=void 0,a.firstRun=void 0,a._prrd=void 0,a.left=r,a.right=o,a.firstRun=!0,a}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return Array.from(new Set([this.left.c,this.right.c]))}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"maxBuildOrder",value:function(){return Math.ceil(this.slots/2)}},{key:"buildOrder",value:function(t){return this.checkSlot(t),Math.min(t+1,this.slots-t)}},{key:"prrd",get:function(){return this._prrd||(this._prrd=n._positionRadiusRotationDockAngle(this.left.c.dockPosition(this.left.s),this.right.c.dockPosition(this.right.s),this.slots)),this._prrd}}],[{key:"_positionRadiusRotationDockAngle",value:function(t,e,r){var o=t.distanceFrom(e),a=n.__computeRadiusTheta(r,o),i=a.radius,u=a.theta,s=t.angleTo(e),l=t.plus(new _(i,s-(N-u)/2)),c=(I-u)/(2*r),f=l.angleTo(e)-c;return{position:l,radius:i,rotation:f,dockAngle:c}}},{key:"__computeRadiusTheta",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);if(n<0||n>t)throw console.error("d: ".concat(n,", s: ").concat(t)),new Error("d must be in [0, s]");var r=0;function o(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;if(r>=100)throw new Error("didn't converge");r+=1;var u=(i+a)/2,s=n/(2*Math.sin(u/2))*(I-u);return Math.abs(s-t)<e?u:s>t?o(u,i):o(a,u)}var a=o();return{radius:t/(I-o()),theta:a}}}]),n}(vt),bt=function(t){function n(t,e,r,o){var a;if(Object(p.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).dock=void 0,a.hand=void 0,a._prrd=void 0,a.dock=r,"left"!==o&&"right"!==o)throw new Error("Hand should be 'left' or 'right'");return a.hand=o,a}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return[this.dock.c]}},{key:"_left",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.dockPosition(e):n.slotPosition(e).rotate(-3*n.dockAngle()).plus(n.position())}},{key:"_right",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.slotPosition(e).rotate(n.dockAngle()).plus(n.position()):n.dockPosition(e)}},{key:"maxBuildOrder",value:function(){return this.slots}},{key:"buildOrder",value:function(t){return this.checkSlot(t),"left"===this.hand?this.slots-t:t+1}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"prrd",get:function(){if(!this._prrd){var t=2*this.slots+1;if(this._prrd=yt._positionRadiusRotationDockAngle(this._left(),this._right(),t),"left"===this.hand){var n=t-this.slots,e=this._prrd,r=e.rotation,o=e.dockAngle,a=_.unspin(r-2*n*o);this._prrd.rotation=a}}return this._prrd}}]),n}(vt),Ot=function(t){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3*N/2;return Object(p.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this,t,0)))._rotation=void 0,e._rotation=r,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"rotation",value:function(){return this._rotation}},{key:"position",value:function(){return new _(0,0)}},{key:"radius",value:function(){return this.slots/I}},{key:"dockAngle",value:function(){return I/(2*this.slots)}},{key:"maxBuildOrder",value:function(){return 1}},{key:"buildOrder",value:function(t){return this.checkSlot(t),1}},{key:"parents",value:function(){return[]}}]),n}(vt),gt=function(){function t(){Object(p.a)(this,t),this._slots=void 0}return Object(h.a)(t,[{key:"slots",get:function(){return this._slots||(this._slots=this.computeSlots()),this._slots}}]),t}(),St=function t(n,e){var r=Math.round(n/2),o=r>2;return 0===e?n:1===e?n+5*r:2===e?n+10*r:3===e?t(n,e-1)+(o?3*r:5*r):4===e?t(n,e-1)+(o?5*r:5*n):t(n,4)+(e-4)*(o?5*r:5*n)},Et=function t(n,e,r){var o=r.length-1,a=Math.min(n,St(e,o+1))-St(e,o);if(a<=0)return r;var i=function(t,n){if(n.length>10)throw new Error("somethings fucky");var e=4!==t;if(1===n.length){var r=n[0][0];return y.f(0,t,2).map(function(n){return{left:{c:r,s:n},right:{c:r,s:(n+t-1)%t}}})}if(!e||2===n.length||4===n.length||n.length>=6)return n[n.length-1].map(function(t){var n=5===t.slots;return{left:{c:t,s:1+(n?1:0)},right:{c:t,s:0+(n?1:0)}}});if(e&&3===n.length){var o=n[1],a=o.length;return y.f(a).map(function(t){return{left:{c:o[(t+1)%a],s:0},right:{c:o[t],s:3}}})}if(e&&5===n.length){var i=n[2],u=n[4];return i.flatMap(function(t,n){return[t,u[n]]}).map(function(t){return{left:{c:t,s:5===t.slots?2:1},right:{c:t,s:5===t.slots?1:0}}})}throw new Error("mmm")}(e,r),u=i.length,s=Math.floor(a/u),l=a%u,c=i.flatMap(function(t,n){var r=t.left,a=t.right,i=s+(n<l?1:0),u=r.c===a.c?5:3,c=St(e,o)+s*n+Math.min(l,n);if(i===u)return[new yt(u,c,r,a)];var f=Math.floor(i/2),p=f+i%2,h=[];return f>0&&h.push(new bt(f,c+p,r,"left")),p>0&&h.push(new bt(p,c,a,"right")),h});return t(n,e,[].concat(Object(M.a)(r),[c]))},wt=function(t){function n(t,e){var r;return Object(p.a)(this,n),(r=Object(d.a)(this,Object(m.a)(n).call(this))).components=void 0,r.type=void 0,r.components=t,r.type=e,r}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){var t=this,n=this.reverseBuildOrder();return this.components.flatMap(function(t){return t.allSlots()}).map(function(e,r){var o=t.type===k.HU?e:Object(mt.a)({},e,{position:e.position.flip(N/2),offset:e.offset.flip(N/2)});return Object(mt.a)({},o,{reverseBuildOrder:n[r]})})}},{key:"reverseBuildOrder",value:function(){var t=new Map(this.components.map(function(t){return[t,[]]}));this.components.flatMap(function(t){return t.parents().map(function(n){return{parent:n,child:t}})}).forEach(function(n){var e=n.parent,r=n.child;return t.get(e).push(r)});var n=new Map;return this.components.flatMap(function(e){return y.f(e.slots).map(function(r){return function e(r){if(!n.has(r)){var o=t.get(r),a=Math.max.apply(Math,Object(M.a)(o.map(function(t){return e(t)+t.maxBuildOrder()})).concat([0]));n.set(r,a)}return n.get(r)}(e)+e.maxBuildOrder()-e.buildOrder(r)})})}},{key:"baseIds",get:function(){return this.components.find(function(t){return t instanceof Ot}).allSlots().map(function(t,n){return n})}},{key:"radius",get:function(){var t=this.slots.map(function(t){var n=t.position,e=t.offset;return n.plus(e).radius});return Math.max.apply(Math,Object(M.a)(t))}}]),n}(gt);var jt=Object(ct.a)([function(t){return t.formationConfig},function(t){return t.planesConfig}],function(t,n){var e=n.filter(function(t){return t.type!==E.NONE}).map(function(t){var n=t.slotting,e=t.slots;return{planeMin:n===S.FILL?e:0,planeMax:e}}).reduce(function(t,n){var e=t.min,r=t.max;return{min:e+n.planeMin,max:r+n.planeMax}},{min:0,max:0}),r=e.min,o=e.max,a=Math.max(r,t.baseSize);return{min:a,max:o,slots:Math.max(Math.min(t.slots,o),a)}}),Tt=function(t){function n(t,e,r){var o;return Object(p.a)(this,n),(o=Object(d.a)(this,Object(m.a)(n).call(this))).position=void 0,o.filledSlots=void 0,o.type=void 0,o.position=t,o.filledSlots=e,o.type=r,o}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){return y.f(24).map(function(t){return{jr:t-14}}).reverse()}},{key:"theta",get:function(){switch(this.position){case A.LEAD:return 3*I/12;case A.LT:return 7*I/12;case A.RT:return 11*I/12}}},{key:"baseIds",get:function(){switch(this.type){case E.OTTER:return[7,8,9,10,11,4,3,2,5,12];case E.SKYVAN:return[3,4,5,8,7,9,1,9,10,11];default:return y.f(10)}}},{key:"videoId",get:function(){switch(this.type){case E.OTTER:return 0;case E.SKYVAN:return 2;default:return 10}}},{key:"superFloatId",get:function(){switch(this.type){case E.OTTER:return 1;case E.SKYVAN:return 0;default:return 11}}}]),n}(gt),kt=function(t){return t.reduce(function(t,n){return t+n.filledSlots},0)},At=function(t,n,e){var r=e.filter(function(t){var n=t.type,e=t.slotting;return n!==E.NONE&&e===S.FILL}).map(function(t){return{position:t.position,filledSlots:t.slots}});return function t(n,e,r,o){if(0===n.length)return o;var a=e/n.length,i=n.find(function(t){return t.position===A.LEAD});if(i&&r>a)return t(n.filter(function(t){return t.position!==A.LEAD}),e-r,r,[{position:A.LEAD,filledSlots:r}].concat(Object(M.a)(o)));var u=n.filter(function(t){return t.slots<a}).map(function(t){return{position:t.position,filledSlots:t.slots}});if(u.length){var s=u.map(function(t){return t.position});return t(n.filter(function(t){var n=t.position;return!s.includes(n)}),e-kt(u),r,[].concat(Object(M.a)(o),Object(M.a)(u)))}var l=Math.floor(a),c=e%l;if(c>0&&i){var f={position:A.LEAD,filledSlots:l};return t(n.filter(function(t){return t.position!==A.LEAD}),e-l,r,[f].concat(Object(M.a)(o)))}var p=n.map(function(t,n){return{position:t.position,filledSlots:l+(c>n?1:0)}});return[].concat(Object(M.a)(o),Object(M.a)(p))}(e.filter(function(t){var n=t.type,e=t.slotting;return n!==E.NONE&&e!==S.FILL}),t-kt(r),n,r)},Lt=function(t){return jt(t).slots},xt=function(t){return t.formationConfig.baseSize},Nt=Object(ct.a)([Lt,xt,function(t){return t.formationConfig.type}],function(t,n,e){return new wt(Et(t,n,[[new Ot(n)]]).flat(),e)}),It=Object(ct.a)([Lt,xt,function(t){return t.planesConfig.filter(function(t){return t.type!==E.NONE})}],function(t,n,e){var r=new Map(At(t,n,e).map(function(t){return[t.position,t.filledSlots]}));return e.map(function(t){var n=t.position,e=t.type;return new Tt(n,r.get(n),e)})}),_t=Object(ct.a)([Nt,It],function(t,n){var e=function(t,n){if(n[0].position!==A.LEAD)throw new Error("lead plane should be first");var e=n.map(function(){return[]}),r=Object(y.f)(t.slots.length),o=n.flatMap(function(t,n){return Array(t.filledSlots).fill(n)});return ht(r,o,pt(function(n,e){if(t.baseIds.includes(n))return 0===e?0:1e3})(function(e,r){var o=t.slots[e],a=n[r],i=o.position.plus(o.offset),u=_.unspin(i.theta-a.theta),s=_.unspin(o.offset.theta-N/2),l=ft(s,0)||ft(s,N)?A.LEAD:s>N?A.RT:A.LT,c=l===A.LEAD||a.position===A.LEAD||l===a.position?0:N;return Math.min(u,2*N-u)+c})).forEach(function(t){var n=Object(b.a)(t,2),r=n[0],o=n[1];return e[o].push(r)}),e.flatMap(function(t,n){return t.map(function(t){return{formationSlotId:t,planeId:n}})})}(t,n),r=function(t,n,e){return n.flatMap(function(n,r){var o=e.filter(function(t){return t.planeId===r}).map(function(t){return t.formationSlotId});return dt(n,t,o).map(function(t){var n=t.formationSlotId,e=t.planeSlotId;return{formationSlotId:n,planeId:r,planeSlotId:e}})})}(t,n,e),o=Object(g.b)(e,function(t){return t.map(function(t){return t.formationSlotId}).sort(function(t,n){return t-n})},function(t){return t.planeId}),a=new Map(n.flatMap(function(t,n,e){var r=e.slice(0,n).reduce(function(t,n){return t+n.filledSlots},0);return(o.get(n)||[]).map(function(t,n){return[t,r+n]})}));return r.map(function(e){var r=e.formationSlotId,o=e.planeId,i=e.planeSlotId;return{formationSlotId:r,formation:t,formationSlot:t.slots[r],planeId:o,plane:n[o],planeSlotId:i,byPlaneSlotId:a.get(r)}})}),Mt=Object(l.b)(function(t){return{formation:Nt(t),planes:It(t),slots:_t(t),viewConfig:t.viewConfig,fill:W(t.viewConfig.colorBy),label:K(t.viewConfig.numberBy)}})(lt),Dt=e(79),Bt=e.n(Dt),Rt=e(82),Pt=e.n(Rt),Ct=e(59),Ft=e.n(Ct),Ut=e(58),Ht=e.n(Ut),Yt=e(81),zt=e.n(Yt),Vt=e(80),Gt=e.n(Vt),Wt=e(39),Kt=e.n(Wt),qt=e(159),Jt=e.n(qt),Zt=i.a.createContext({expanded:"",setExpanded:function(t){}}),$t=e(28),Qt=e(158),Xt=e.n(Qt),tn=e(61),nn=Object(r.c)(function(t){return{root:{margin:t.spacing.unit,minWidth:180}}});var en,rn,on,an,un,sn=function(t){var n=t.label,e=t.value,r=t.onSet,o=t.opts,a=t.desc,u=nn();return i.a.createElement($t.a,{className:u.root},i.a.createElement($t.b,null,n),i.a.createElement($t.d,{value:e,onChange:function(t){return r(parseInt(t.target.value))},native:tn.isMobile},function(t,n){return t.map(function(t){return tn.isMobile?i.a.createElement("option",{key:t,value:t},n?n[t]:t):i.a.createElement($t.c,{key:t,value:t},n?n[t]:t)})}(o,a)))},ln=e(76),cn=e.n(ln),fn=e(78),pn=e.n(fn),hn=e(77),dn=e.n(hn),mn=e(157),vn=e.n(mn),yn=Object(r.c)(function(t){return{heading:{fontSize:t.typography.pxToRem(15),flexBasis:"50%",flexShrink:0},secondaryHeading:{fontSize:t.typography.pxToRem(15),color:t.palette.text.secondary},form:{display:"flex",flexWrap:"wrap"},formControl:{margin:t.spacing.unit,minWidth:180}}}),bn=function(t){var n=yn(),e=t.name,r=t.children,o=t.heading1,u=t.heading2,s=Object(a.useContext)(Zt),l=s.expanded,c=s.setExpanded;return i.a.createElement(cn.a,{expanded:l===e,onChange:function(t,n){c(n?e:"")},square:!0},i.a.createElement(dn.a,{expandIcon:i.a.createElement(vn.a,null)},i.a.createElement(Kt.a,{className:n.heading},o),i.a.createElement(Kt.a,{className:n.secondaryHeading},u)),i.a.createElement(pn.a,null,i.a.createElement("form",{className:n.form,autoComplete:"off"},r)))},On=Object(r.c)(function(t){return{slots:{display:"flex",alignItems:"center"},slider:{paddingLeft:t.spacing.unit,paddingRight:t.spacing.unit},formControl:{margin:t.spacing.unit,minWidth:180}}}),gn=(en={},Object(D.a)(en,k.HD,"Head Down (from below)"),Object(D.a)(en,k.HD_ABOVE,"Head Down (from above)"),Object(D.a)(en,k.HU,"Head Up (from above)"),en),Sn=Object(l.b)(function(t){return{slotsOptions:jt(t),baseSize:t.formationConfig.baseSize,formationType:t.formationConfig.type}},function(t){return{onFormationSlotsSet:function(n){return t(function(t){return{type:"SET_FORMATION_SLOTS",slots:t}}(n))},onBaseSizeSet:function(n){return t({type:"SET_BASE_SIZE",baseSize:n})},onSetFormationType:function(n){return t({type:"SET_FORMATION_TYPE",formationType:n})}}})(function(t){var n=t.slotsOptions,e=n.min,r=n.max,o=n.slots,a=t.baseSize,u=t.formationType,s=t.onFormationSlotsSet,l=t.onBaseSizeSet,c=t.onSetFormationType,f=On(),p=y.f(e,r),h=[k.HD,k.HD_ABOVE,k.HU],d=tn.isMobile?i.a.createElement(sn,{label:"Slots",value:o,opts:p,onSet:s}):i.a.createElement($t.a,{className:f.formControl},i.a.createElement($t.e,{variant:"caption",gutterBottom:!0},"Slots"),i.a.createElement("div",{className:f.slots},i.a.createElement($t.e,null,e),i.a.createElement(Xt.a,{min:e,max:r,value:o,step:1,className:f.slider,onChange:function(t,n){return s(n)}}),i.a.createElement($t.e,null,r)));return i.a.createElement(i.a.Fragment,null,i.a.createElement(bn,{name:"slots",heading1:"Slots",heading2:o.toString()},d),i.a.createElement(bn,{name:"baseSize",heading1:"BaseSize",heading2:a.toString()},i.a.createElement(sn,{label:"Base Size",value:a,opts:[4,6,8,10],onSet:l})),i.a.createElement(bn,{name:"formationType",heading1:"Formation Type",heading2:gn[u]},i.a.createElement(sn,{label:"Formation Type",value:u,opts:h,desc:gn,onSet:c})))}),En=(rn={},Object(D.a)(rn,E.OTTER,"Otter"),Object(D.a)(rn,E.SKYVAN,"Skyvan"),Object(D.a)(rn,E.NONE,"None"),rn),wn=function(t){var n,e=t.planeConfig,r=t.setters,o=e.position,a=e.label,u=e.slotting,s=e.type,l=e.slots,c=r.onPlaneSlottingSet,f=r.onPlaneTypeSet,p=r.onPlaneSlotsSet,h=(i.a.createElement("div",null,i.a.createElement("strong",null,a),": ",En[s],s!==E.NONE?", ".concat(l," slots, ").concat(u===S.FILL?"filled":"slotted evenly"):null),o===A.LEAD?[E.OTTER,E.SKYVAN]:[E.OTTER,E.SKYVAN,E.NONE]),d=S.FILL,m=S.SPLIT,v=(n={},Object(D.a)(n,d,"Fill plane"),Object(D.a)(n,m,"Split evenly"),n),b=[m,d];return i.a.createElement(bn,{name:a,heading1:a,heading2:En[s]},i.a.createElement(sn,{label:"Type",value:s,opts:h,desc:En,onSet:function(t){return f(o,t)}}),i.a.createElement(sn,{label:"Slots",value:l,opts:y.f(1,31),onSet:function(t){return p(o,t)}}),i.a.createElement(sn,{label:"Slotting",value:u,opts:b,desc:v,onSet:function(t){return c(o,t)}}))},jn=Object(l.b)(function(t){return{planesConfig:t.planesConfig}},function(t){return{setters:{onPlaneTypeSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_TYPE",position:t,planeType:n}}(n,e))},onPlaneSlotsSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTS",position:t,slots:n}}(n,e))},onPlaneSlottingSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTTING",position:t,slotting:n}}(n,e))}}}})(function(t){var n=t.planesConfig,e=t.setters;return i.a.createElement(i.a.Fragment,null,n.map(function(t){return i.a.createElement(wn,{key:t.position,planeConfig:t,setters:e})}))}),Tn=[w.DEFAULT,w.PLANE,w.BUILD_ORDER,w.RADIAL],kn=(on={},Object(D.a)(on,w.DEFAULT,"Default"),Object(D.a)(on,w.PLANE,"Plane"),Object(D.a)(on,w.BUILD_ORDER,"Build Order"),Object(D.a)(on,w.RADIAL,"Radial"),on),An=[j.SLOT_NUM,j.SLOT_NUM_BY_PLANE,j.BUILD_ORDER],Ln=(an={},Object(D.a)(an,j.SLOT_NUM,"Slot Number"),Object(D.a)(an,j.SLOT_NUM_BY_PLANE,"Slot Number by Plane"),Object(D.a)(an,j.BUILD_ORDER,"Build Order"),an),xn=[T.FORMATION,T.PLANES,T.BOTH],Nn=(un={},Object(D.a)(un,T.FORMATION,"Formation"),Object(D.a)(un,T.PLANES,"Planes"),Object(D.a)(un,T.BOTH,"Formation & Planes"),un),In=Object(l.b)(function(t){return{viewConfig:t.viewConfig}},function(t){return{onSetColorBy:function(n){return t(function(t){return{type:"SET_COLOR_BY",colorBy:t}}(n))},onSetNumberBy:function(n){return t(function(t){return{type:"SET_NUMBER_BY",numberBy:t}}(n))},onSetShow:function(n){return t(function(t){return{type:"SET_SHOW",show:t}}(n))}}})(function(t){var n=t.viewConfig,e=t.onSetColorBy,r=t.onSetNumberBy,o=t.onSetShow;return i.a.createElement(i.a.Fragment,null,i.a.createElement(bn,{name:"colorby",heading1:"Color by",heading2:kn[n.colorBy]},i.a.createElement(sn,{label:"Color by",value:n.colorBy,opts:Tn,desc:kn,onSet:e})),i.a.createElement(bn,{name:"numberby",heading1:"Number by",heading2:Ln[n.numberBy]},i.a.createElement(sn,{label:"Number by",value:n.numberBy,opts:An,desc:Ln,onSet:r})),i.a.createElement(bn,{name:"show",heading1:"Show",heading2:Nn[n.show]},i.a.createElement(sn,{label:"Show",value:n.show,opts:xn,desc:Nn,onSet:o})))});function _n(){var t=i.a.useState(""),n=Object(b.a)(t,2),e=n[0],r=n[1];return i.a.createElement(Zt.Provider,{value:{expanded:e,setExpanded:r}},i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(Sn,null),i.a.createElement(jn,null),i.a.createElement(In,null)))}var Mn=Object(r.c)(function(t){return{root:{display:"flex",height:"100vh"},drawer:Object(D.a)({},t.breakpoints.up("sm"),{width:280,flexShrink:0}),appBar:Object(D.a)({marginLeft:280},t.breakpoints.up("sm"),{width:"calc(100% - ".concat(280,"px)")}),menuButton:Object(D.a)({marginRight:20},t.breakpoints.up("sm"),{display:"none"}),toolbar:t.mixins.toolbar,drawerPaper:{width:280},content:{flexGrow:1,display:"flex",flexDirection:"column"}}}),Dn=function(t){var n=Mn(),e=i.a.useState(!1),r=Object(b.a)(e,2),o=r[0],a=r[1];function u(){a(!o)}return i.a.createElement("div",{className:n.root},i.a.createElement(Bt.a,{position:"fixed",className:n.appBar},i.a.createElement(Gt.a,null,i.a.createElement(Ht.a,{color:"inherit","aria-label":"Open drawer",onClick:u,className:n.menuButton},i.a.createElement(Jt.a,null)),i.a.createElement(Kt.a,{variant:"h6",color:"inherit",noWrap:!0},"Formations"))),i.a.createElement("nav",{className:n.drawer},i.a.createElement(Ft.a,{smUp:!0,implementation:"css"},i.a.createElement(zt.a,{variant:"temporary",open:o,onOpen:u,onClose:u,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},i.a.createElement("div",{className:n.toolbar}),i.a.createElement(_n,null))),i.a.createElement(Ft.a,{xsDown:!0,implementation:"css"},i.a.createElement(Pt.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},i.a.createElement("div",{className:n.toolbar}),i.a.createElement("div",null),i.a.createElement(_n,null)))),i.a.createElement("main",{className:n.content},i.a.createElement("div",{className:n.toolbar}),t.children))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Bn=A.LEAD,Rn=A.LT,Pn=A.RT,Cn=[{position:Bn,label:"Lead",slotting:S.SPLIT,type:E.OTTER,slots:23},{position:Rn,label:"Left Trail",slotting:S.SPLIT,type:E.NONE,slots:23},{position:Pn,label:"Right Trail",slotting:S.SPLIT,type:E.OTTER,slots:23}],Fn=Object(c.combineReducers)({planesConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,n=arguments.length>1?arguments[1]:void 0,e=n.position;return t.map(function(t){if(t.position!==e)return t;switch(n.type){case"SET_PLANE_SLOTTING":return Object(mt.a)({},t,{slotting:n.slotting});case"SET_PLANE_SLOTS":return Object(mt.a)({},t,{slots:n.slots});case"SET_PLANE_TYPE":return Object(mt.a)({},t,{type:n.planeType});default:return t}})},formationConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slots:42,baseSize:6,type:k.HD},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_FORMATION_SLOTS":return Object(mt.a)({},t,{slots:n.slots});case"SET_BASE_SIZE":return Object(mt.a)({},t,{baseSize:n.baseSize});case"SET_FORMATION_TYPE":return Object(mt.a)({},t,{type:n.formationType});default:return t}},viewConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{colorBy:w.PLANE,numberBy:j.SLOT_NUM_BY_PLANE,show:T.BOTH},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_COLOR_BY":return Object(mt.a)({},t,{colorBy:n.colorBy});case"SET_NUMBER_BY":return Object(mt.a)({},t,{numberBy:n.numberBy});case"SET_SHOW":return Object(mt.a)({},t,{show:n.show});default:return t}}}),Un=e(83),Hn=e.n(Un),Yn=(e(378),e(33)),zn=Object(Yn.createMuiTheme)({typography:{useNextVariants:!0}}),Vn=Object(c.createStore)(Fn,Object(f.composeWithDevTools)());s.a.render(i.a.createElement(l.a,{store:Vn},i.a.createElement(Hn.a,null),i.a.createElement(r.a,{theme:zn},i.a.createElement(function(){return i.a.createElement(Dn,null,i.a.createElement(Mt,null))},null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[235,1,2]]]);
//# sourceMappingURL=main.3521ea79.chunk.js.map