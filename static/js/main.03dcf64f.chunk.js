(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(t,n,e){t.exports=e(313)},185:function(t,n,e){},313:function(t,n,e){"use strict";e.r(n);var r,o=e(0),a=e.n(o),i=e(35),u=e.n(i),s=e(30),l=e(41),c=e(150),f=e(318),p=e(14),h=e(15),d=e(22),m=e(21),v=e(23),y=e(7),g=(e(185),e(37)),O=function(){function t(){Object(p.a)(this,t),this.group=void 0}return Object(h.a)(t,[{key:"withGroup",value:function(t){return this.group=t,this}}]),t}(),b=e(167);!function(t){t.LEAD="lead",t.LT="lt",t.RT="rt"}(r||(r={}));var E,S,w,k,j,T,A=r;!function(t){t[t.SPLIT=0]="SPLIT",t[t.FILL=1]="FILL"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.OTTER=1]="OTTER",t[t.SKYVAN=2]="SKYVAN"}(S||(S={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.PLANE=1]="PLANE",t[t.BUILD_ORDER=2]="BUILD_ORDER",t[t.RADIAL=3]="RADIAL"}(w||(w={})),function(t){t[t.SLOT_NUM=0]="SLOT_NUM",t[t.BUILD_ORDER=1]="BUILD_ORDER"}(k||(k={})),function(t){t[t.FORMATION=0]="FORMATION",t[t.PLANES=1]="PLANES",t[t.BOTH=2]="BOTH"}(j||(j={})),function(t){t[t.HD=0]="HD",t[t.HD_ABOVE=1]="HD_ABOVE",t[t.HU=2]="HU"}(T||(T={}));var L,I,x=Math.PI,M=2*x,_=function(){function t(n,e){Object(p.a)(this,t),this.radius=void 0,this.theta=void 0,this.radius=n,this.theta=t.unspin(e)}return Object(h.a)(t,[{key:"toString",value:function(){return"(r".concat(this.radius,",\u2220").concat(this.theta/M,"\u03c4)")}},{key:"plus",value:function(n){var e=this.radius,r=this.theta,o=n.radius,a=n.theta;return new t(Math.sqrt(e*e+o*o+2*e*o*Math.cos(a-r)),r+Math.atan2(o*Math.sin(a-r),e+o*Math.cos(a-r)))}},{key:"minus",value:function(t){return this.plus(t.rotate(x))}},{key:"rotate",value:function(n){return new t(this.radius,this.theta+n)}},{key:"flip",value:function(n){return new t(this.radius,-this.theta-2*n)}},{key:"distanceFrom",value:function(t){return this.minus(t).radius}},{key:"angleFrom",value:function(t){return this.minus(t).theta}},{key:"angleTo",value:function(t){return t.minus(this).theta}},{key:"scale",value:function(n){return new t(this.radius*n,this.theta)}},{key:"d3theta",get:function(){return t.unspin(-this.theta+x/2)}},{key:"x",get:function(){return this.radius*Math.cos(this.theta)}},{key:"y",get:function(){return-this.radius*Math.sin(this.theta)}}],[{key:"unspin",value:function(t){return t-2*Math.floor(t/(2*x))*x}}]),t}(),D=e(17),N=e(24),R=40,B=(L={},Object(N.a)(L,A.LEAD,"Lead"),Object(N.a)(L,A.LT,"Left Trail"),Object(N.a)(L,A.RT,"Right Trail"),L),P=1.5,C=6.5,F=y.e().x(function(t){return t.x*R}).y(function(t){return t.y*R}),H=function(){function t(){var n=this;Object(p.a)(this,t),this.otterPoints=[{x:-P,y:-C},{x:P,y:-C},{x:P,y:C},{x:-P,y:C},{x:-P,y:-C}],this.doorPoints=[{x:-P,y:C-6},{x:-P,y:C-2}],this.slotCoords=[].concat(Object(D.a)(y.f(7).map(function(t){return{x:-2,y:6-t}})),Object(D.a)(y.f(3).map(function(t){return{x:-1,y:3.5-t}})),Object(D.a)(y.f(2).map(function(t){return{x:0,y:3-t}})),Object(D.a)(y.f(6).flatMap(function(t){return[{x:.5,y:-t},{x:-.5,y:-t}]}))),this.x=function(t){return n.slotCoords[t.planeSlotId].x*R},this.y=function(t){return n.slotCoords[t.planeSlotId].y*R}}return Object(h.a)(t,[{key:"draw",value:function(t){t.append("path").attr("d",F(this.otterPoints)),t.append("path").attr("stroke-width",3).attr("d",F(this.doorPoints)),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",(1-C)*R).text(function(t){return B[t.plane.position]})}}]),t}(),U=function(){function t(){var n=this;Object(p.a)(this,t),this.skyvanPoints=[{x:-P,y:-C},{x:P,y:-C},{x:P,y:C},{x:-P,y:C},{x:-P,y:-C}],this.doorPoints=[{x:-P,y:C},{x:P,y:C}],this.redLine=[{x:-P,y:C-4},{x:P,y:C-4}],this.slotCoords=[{x:-1,y:6},{x:0,y:6},{x:1,y:6}].concat(Object(D.a)(y.f(11).flatMap(function(t){return[{x:-.5,y:5-t},{x:.5,y:5-t}]}))),this.x=function(t){return n.slotCoords[t.planeSlotId].x*R},this.y=function(t){return n.slotCoords[t.planeSlotId].y*R}}return Object(h.a)(t,[{key:"draw",value:function(t){t.append("path").attr("d",F(this.skyvanPoints)),t.append("path").attr("stroke-width",3).attr("d",F(this.doorPoints)),t.append("path").attr("stroke-width",2).style("stroke","red").attr("d",F(this.redLine)),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",(1-C)*R).text(function(t){return B[t.plane.position]})}}]),t}(),z=(I={},Object(N.a)(I,S.OTTER,new H),Object(N.a)(I,S.SKYVAN,new U),I),Y=function(t){var n,e=t.formationSlot.buildOrder;return y.g(y.h).domain((n=12,y.f(n).map(function(t){return t.toString()})))((e-1).toString())},G=function(t){return y.g(y.h.filter(function(t,n){return[0,2,4].includes(n)})).domain([A.LEAD,A.LT,A.RT])(t.plane.position)},V=function(t){var n=t.formationSlot,e=n.offset.plus(n.position).theta/M;return y.d(e)},K=function(t){switch(t){case w.BUILD_ORDER:return Y;case w.PLANE:return G;case w.RADIAL:return V;default:return function(){return null}}},W=function(t){switch(t){case k.BUILD_ORDER:return function(t){return t.formationSlot.buildOrder};default:return function(t){return t.formationSlotId+1}}},q=function(t,n){return(n===T.HD?t.flip(x/2):t).scale(80)},J=function(t){var n=t.formationSlot.position,e=t.formation.type;return q(n,e)},Z=function(t){var n=t.formationSlot.offset,e=t.formation.type;return q(n,e)},$=function(t){var n=J(t),e=t.formationSlot.dockAngle;return y.a()({outerRadius:n.radius,innerRadius:n.radius,startAngle:n.d3theta-e,endAngle:n.d3theta+e})},Q=function(t){return J(t).x},X=function(t){return J(t).y},tt=function(t){return z[t.plane.type].x(t)},nt=function(t){return z[t.plane.type].y(t)},et=function(t){y.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(y.b.overshoot(3)).attr("r",20)},rt=function(t){y.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(y.b.overshoot(3)).attr("r",16)},ot=function(t,n,e,r,o){return t.append("g").classed("slot",!0).on("mouseover",et).on("mouseout",rt).attr("formationSlotId",function(t){return t.formationSlotId}).call(function(t){t.append("circle").attr("r",16).call(function(t){n&&t.attr("cx",n),e&&t.attr("cy",e),r&&t.attr("fill",r)}),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").call(function(t){n&&t.attr("x",n),e&&t.attr("y",e),o&&t.text(o)})})},at=function(t,n,e,r,o){t.select("g.slot circle").attr("cx",n).attr("cy",e).attr("fill",r),t.select("g.slot text").attr("x",n).attr("y",e).text(o)},it=function(t,n){return t.transition(n).attr("transform","scale(0)").remove()},ut=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t,n){var e=function(t){var n=t.planes,e=t.viewConfig.show,r=t.formation,o=r.radius,a=r.type;switch(e){case j.FORMATION:case j.PLANES:var i=n.map(function(t){return t.position});return new Map([A.LT,A.LEAD,A.RT].filter(function(t){return i.includes(t)}).map(function(t,n,e){var r=300*n-150*(e.length-1);return[t,new _(Math.abs(r),r>=0?0:x)]}));case j.BOTH:return new Map(n.map(function(t){var n=t.position,e=t.theta,r=new _(80*Math.max(7,o+3),n===A.LEAD?M/12:e);return[n,a===T.HD?r.flip(x/2):r]}))}}(t),r=t.fill,o=t.label,a=t.viewConfig.show===j.FORMATION?[]:Array.from(Object(b.a)(t.slots,function(t){return t.plane})).map(function(t){var n=Object(g.a)(t,2);return{plane:n[0],slotData:n[1]}});this.group.selectAll("g.plane").data(a,function(t){return"".concat(t.plane.position,".").concat(t.plane.type)}).join(function(t){return t.append("g").classed("plane",!0).each(function(t,e,r){var o=t.plane;z[o.type].draw(y.i(r[e]),n)}).attr("transform","translate(0,0) scale(0)")},void 0,function(t){return it(t,n)}).transition(n).attr("transform",function(t){var n=t.plane.position;return"translate(".concat(e.get(n).x,",").concat(e.get(n).y,") scale(1)")}).selection().selectAll("g.slot").data(function(t){return t.slotData},function(t){return"".concat(t.formationSlotId,".").concat(t.planeId)}).join(ot,void 0,function(t){return it(t,n)}).transition(n).attr("transform","scale(1)").call(function(t){at(t,tt,nt,r,o)})}}]),n}(O),st=function(t){function n(){return Object(p.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(h.a)(n,[{key:"draw",value:function(t,n){var e=t.slots,r=t.viewConfig,o=t.fill,a=t.label,i=r.show===j.PLANES?[]:e;this.group.selectAll("g.slotgroup").data(i,function(t){return t.formationSlotId.toString()}).join(function(t){return t.append("g").attr("class","slotgroup").attr("transform","translate(0,0) scale(0)").call(function(t){t.append("path").attr("class","grips").attr("d",$),ot(t,Q,X,o,a)})},void 0,function(t){return it(t,n)}).transition(n).attr("transform",function(t){return function(t){return"translate(".concat(Z(t).x,",").concat(Z(t).y,")")}(t)+" scale(1)"}).call(function(t){t.select("path").attr("d",$),at(t,Q,X,o,a)})}}]),n}(O),lt=function(t){function n(){var t,e;Object(p.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(o)))).svg=void 0,e.allGrp=void 0,e.zoom=void 0,e.formationDrawer=void 0,e.planesDrawer=void 0,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"height",value:function(){return parseInt(this.svg.style("height"),10)}},{key:"width",value:function(){return parseInt(this.svg.style("width"),10)}},{key:"componentDidMount",value:function(){var t=this;this.allGrp=this.svg.append("g"),this.zoom=y.l().scaleExtent([.5,2]).on("zoom",function(){return t.allGrp.attr("transform",y.c.transform)}),this.svg.call(this.zoom).call(this.zoom.translateBy,this.width()/2,this.height()/2);var n=y.k().duration(1e3);this.formationDrawer=(new st).withGroup(this.allGrp.append("g")),this.formationDrawer.draw(this.props,n),this.planesDrawer=(new ut).withGroup(this.allGrp.append("g")),this.planesDrawer.draw(this.props,n)}},{key:"componentDidUpdate",value:function(){var t=y.k().duration(1e3);this.formationDrawer.draw(this.props,t),this.planesDrawer.draw(this.props,t)}},{key:"render",value:function(){var t=this;return a.a.createElement("svg",{width:"100%",height:"100%",ref:function(n){return t.svg=y.i(n)}})}}]),n}(a.a.Component),ct=e(54);function ft(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);return Math.abs(t-n)<e}var pt=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return function(e,r){for(var o=0;o<n.length;o++){var a=(0,n[o])(e,r);if(a)return a}return t(e,r)}}},ht=function(t,n,e){if(t.length!==n.length)throw new Error("as and bs have diff lenghts");var r=t.flatMap(function(t){return n.flatMap(function(n){var r=e(t,n);return r<0||r===1/0?[{a:t,b:n,score:r}]:[]})});r.length>0&&console.warn("Scores should be non-negative and not infinity: ",r);var o=function(t,n){if("object"===typeof n){var e=n;n=function(t,n){return e[t][n]}}var r,o,a=0;for(r=0;r<t;r++)for(o=0;o<t;o++)a+=n(r,o);var i,u,s,l,c,f,p,h,d,m,v,y,g,O,b,E,S,w,k,j,T=a/t*1e4,A=a/t/1e4,L=new Int32Array(t),I=new Int32Array(t),x=new Float64Array(t),M=new Float64Array(t),_=0,D=new Int32Array(t),N=new Int32Array(t),R=new Int32Array(t),B=new Float64Array(t),P=new Int32Array(t);for(u=0;u<t;u++)R[u]=0;for(d=t;d--;){for(E=n(0,d),s=0,u=1;u<t;u++)n(u,d)<E&&(E=n(u,d),s=u);M[d]=E,1===++R[s]?(L[s]=d,I[d]=s):M[d]<M[L[s]]?(m=L[s],L[s]=d,I[d]=s,I[m]=-1):I[d]=-1}for(u=0;u<t;u++)if(0===R[u])D[_++]=u;else if(1===R[u]){for(m=L[u],E=T,d=0;d<t;d++)d!==m&&n(u,d)-M[d]<E+A&&(E=n(u,d)-M[d]);M[m]=M[m]-E}var C=0;do{for(C++,p=0,l=_,_=0;p<l;){for(u=D[p],p++,w=n(u,0)-M[0],m=0,k=T,d=1;d<t;d++)(S=n(u,d)-M[d])<k&&(S>=w?(k=S,v=d):(k=w,w=S,v=m,m=d));f=I[m],w<k+A?M[m]=M[m]-(k+A-w):f>-1&&(m=v,f=I[v]),L[u]=m,I[m]=u,f>-1&&(w<k?D[--p]=f:D[_++]=f)}}while(C<2);for(c=0;c<_;c++){for(h=D[c],d=t;d--;)B[d]=n(h,d)-M[d],P[d]=h,N[d]=d;O=0,b=0,i=!1;do{if(b===O){for(g=O-1,E=B[N[b++]],p=b;p<t;p++)(S=B[d=N[p]])<=E&&(S<E&&(b=O,E=S),N[p]=N[b],N[b++]=d);for(p=O;p<b;p++)if(I[N[p]]<0){y=N[p],i=!0;break}}if(!i)for(m=N[O],O++,S=n(u=I[m],m)-M[m]-E,p=b;p<t;p++)if((j=n(u,d=N[p])-M[d]-S)<B[d]){if(P[d]=u,j===E){if(I[d]<0){y=d,i=!0;break}N[p]=N[b],N[b++]=d}B[d]=j}}while(!i);for(p=g+1;p--;)M[m=N[p]]=M[m]+B[m]-E;do{u=P[y],I[y]=u,m=y,y=L[u],L[u]=m}while(u!==h)}var F=0;for(u=t;u--;)d=L[u],x[u]=n(u,d)-M[d],F+=n(u,d);return{cost:F,row:L,col:I,u:x,v:M}}(t.length,function(t,n,e){var r=new Map;return function(o,a){var i="".concat(o,".").concat(a);if(!r.has(i)){var u=t[o],s=n[a];r.set(i,e(u,s))}return r.get(i)}}(t,n,e));if(!o.row.every(function(n){return n>=0&&n<t.length})||new Set(o.row).size!=t.length||o.cost===1/0){var a=t.flatMap(function(t){return n.map(function(n){return{a:t,b:n,score:e(t,n)}})});console.log("something's weird",{allScores:a,result:o})}return Array.from(o.row).map(function(e,r){return[t[r],n[e]]})};var dt=function(t,n,e){return ht(e,y.f(t.filledSlots),function(e,r){var o=n.slots[e],a=o.reverseBuildOrder,i=t.slots[r].jr,u=o.offset.plus(o.position).y;return Math.abs(i)*a*100-u*i+1e3}).map(function(t){var n=Object(g.a)(t,2);return{formationSlotId:n[0],planeSlotId:n[1]}})};var mt=e(25),vt=function(){function t(n,e){if(Object(p.a)(this,t),this.slots=void 0,this.slotNumOffset=void 0,n<0)throw new Error("slots should be non-negative, was ".concat(n));this.slots=n,this.slotNumOffset=e}return Object(h.a)(t,[{key:"checkSlot",value:function(t){if(t<0||t>=this.slots)throw new Error("slot should be in [0, ".concat(this.slots,"), was ").concat(t))}},{key:"slotData",value:function(t){return this.checkSlot(t),{offset:this.position(),position:this.slotPosition(t),dockAngle:this.dockAngle(),buildOrder:this.buildOrder(t)+this.waiting()}}},{key:"allSlots",value:function(){var t=this;return Object(y.f)(this.slots).map(function(n){return t.slotData(n)})}},{key:"slotPosition",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.checkSlot(t);var e=new _(this.radius(),this.rotation()-2*t*this.dockAngle());return n?e.plus(this.position()):e}},{key:"dockPosition",value:function(t){return this.checkSlot(t),this.slotPosition(t).rotate(-this.dockAngle()).plus(this.position())}},{key:"waiting",value:function(){return Math.max.apply(Math,Object(D.a)(this.parents().map(function(t){return t.waiting()+t.maxBuildOrder()})).concat([0]))}}]),t}(),yt=function(t){function n(t,e,r,o){var a;return Object(p.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).left=void 0,a.right=void 0,a.firstRun=void 0,a._prrd=void 0,a.left=r,a.right=o,a.firstRun=!0,a}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return Array.from(new Set([this.left.c,this.right.c]))}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"maxBuildOrder",value:function(){return Math.ceil(this.slots/2)}},{key:"buildOrder",value:function(t){return this.checkSlot(t),Math.min(t+1,this.slots-t)}},{key:"prrd",get:function(){return this._prrd||(this._prrd=n._positionRadiusRotationDockAngle(this.left.c.dockPosition(this.left.s),this.right.c.dockPosition(this.right.s),this.slots)),this._prrd}}],[{key:"_positionRadiusRotationDockAngle",value:function(t,e,r){var o=t.distanceFrom(e),a=n.__computeRadiusTheta(r,o),i=a.radius,u=a.theta,s=t.angleTo(e),l=t.plus(new _(i,s-(x-u)/2)),c=(M-u)/(2*r),f=l.angleTo(e)-c;return{position:l,radius:i,rotation:f,dockAngle:c}}},{key:"__computeRadiusTheta",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);if(n<0||n>t)throw console.error("d: ".concat(n,", s: ").concat(t)),new Error("d must be in [0, s]");var r=0;function o(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;if(r>=100)throw new Error("didn't converge");r+=1;var u=(i+a)/2,s=n/(2*Math.sin(u/2))*(M-u);return Math.abs(s-t)<e?u:s>t?o(u,i):o(a,u)}var a=o();return{radius:t/(M-o()),theta:a}}}]),n}(vt),gt=function(t){function n(t,e,r,o){var a;if(Object(p.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).dock=void 0,a.hand=void 0,a._prrd=void 0,a.dock=r,"left"!==o&&"right"!==o)throw new Error("Hand should be 'left' or 'right'");return a.hand=o,a}return Object(v.a)(n,t),Object(h.a)(n,[{key:"parents",value:function(){return[this.dock.c]}},{key:"_left",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.dockPosition(e):n.slotPosition(e).rotate(-3*n.dockAngle()).plus(n.position())}},{key:"_right",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.slotPosition(e).rotate(n.dockAngle()).plus(n.position()):n.dockPosition(e)}},{key:"maxBuildOrder",value:function(){return this.slots}},{key:"buildOrder",value:function(t){return this.checkSlot(t),"left"===this.hand?this.slots-t:t+1}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"prrd",get:function(){if(!this._prrd){var t=2*this.slots+1;if(this._prrd=yt._positionRadiusRotationDockAngle(this._left(),this._right(),t),"left"===this.hand){var n=t-this.slots,e=this._prrd,r=e.rotation,o=e.dockAngle,a=_.unspin(r-2*n*o);this._prrd.rotation=a}}return this._prrd}}]),n}(vt),Ot=function(t){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3*x/2;return Object(p.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this,t,0)))._rotation=void 0,e._rotation=r,e}return Object(v.a)(n,t),Object(h.a)(n,[{key:"rotation",value:function(){return this._rotation}},{key:"position",value:function(){return new _(0,0)}},{key:"radius",value:function(){return this.slots/M}},{key:"dockAngle",value:function(){return M/(2*this.slots)}},{key:"maxBuildOrder",value:function(){return 1}},{key:"buildOrder",value:function(t){return this.checkSlot(t),1}},{key:"parents",value:function(){return[]}}]),n}(vt),bt=function(){function t(){Object(p.a)(this,t),this._slots=void 0}return Object(h.a)(t,[{key:"slots",get:function(){return this._slots||(this._slots=this.computeSlots()),this._slots}}]),t}(),Et=function t(n,e){var r=Math.round(n/2),o=r>2;return 0===e?n:1===e?n+5*r:2===e?n+10*r:3===e?t(n,e-1)+(o?3*r:5*r):4===e?t(n,e-1)+(o?5*r:5*n):t(n,4)+(e-4)*(o?5*r:5*n)},St=function t(n,e,r){var o=r.length-1,a=Math.min(n,Et(e,o+1))-Et(e,o);if(a<=0)return r;var i=function(t,n){if(n.length>10)throw new Error("somethings fucky");var e=4!==t;if(1===n.length){var r=n[0][0];return y.f(0,t,2).map(function(n){return{left:{c:r,s:n},right:{c:r,s:(n+t-1)%t}}})}if(!e||2===n.length||4===n.length||n.length>=6)return n[n.length-1].map(function(t){var n=5===t.slots;return{left:{c:t,s:1+(n?1:0)},right:{c:t,s:0+(n?1:0)}}});if(e&&3===n.length){var o=n[1],a=o.length;return y.f(a).map(function(t){return{left:{c:o[(t+1)%a],s:0},right:{c:o[t],s:3}}})}if(e&&5===n.length){var i=n[2],u=n[4];return i.flatMap(function(t,n){return[t,u[n]]}).map(function(t){return{left:{c:t,s:5===t.slots?2:1},right:{c:t,s:5===t.slots?1:0}}})}throw new Error("mmm")}(e,r),u=i.length,s=Math.floor(a/u),l=a%u,c=i.flatMap(function(t,n){var r=t.left,a=t.right,i=s+(n<l?1:0),u=r.c===a.c?5:3,c=Et(e,o)+s*n+Math.min(l,n);if(i===u)return[new yt(u,c,r,a)];var f=Math.floor(i/2),p=f+i%2,h=[];return f>0&&h.push(new gt(f,c+p,r,"left")),p>0&&h.push(new gt(p,c,a,"right")),h});return t(n,e,[].concat(Object(D.a)(r),[c]))},wt=function(t){function n(t,e){var r;return Object(p.a)(this,n),(r=Object(d.a)(this,Object(m.a)(n).call(this))).components=void 0,r.type=void 0,r.components=t,r.type=e,r}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){var t=this,n=this.reverseBuildOrder();return this.components.flatMap(function(t){return t.allSlots()}).map(function(e,r){var o=t.type===T.HU?e:Object(mt.a)({},e,{position:e.position.flip(x/2),offset:e.offset.flip(x/2)});return Object(mt.a)({},o,{reverseBuildOrder:n[r]})})}},{key:"reverseBuildOrder",value:function(){var t=new Map(this.components.map(function(t){return[t,[]]}));this.components.flatMap(function(t){return t.parents().map(function(n){return{parent:n,child:t}})}).forEach(function(n){var e=n.parent,r=n.child;return t.get(e).push(r)});var n=new Map;return this.components.flatMap(function(e){return y.f(e.slots).map(function(r){return function e(r){if(!n.has(r)){var o=t.get(r),a=Math.max.apply(Math,Object(D.a)(o.map(function(t){return e(t)+t.maxBuildOrder()})).concat([0]));n.set(r,a)}return n.get(r)}(e)+e.maxBuildOrder()-e.buildOrder(r)})})}},{key:"baseIds",get:function(){return this.components.find(function(t){return t instanceof Ot}).allSlots().map(function(t,n){return n})}},{key:"radius",get:function(){var t=this.slots.map(function(t){var n=t.position,e=t.offset;return n.plus(e).radius});return Math.max.apply(Math,Object(D.a)(t))}}]),n}(bt);var kt,jt=Object(ct.a)([function(t){return t.formationConfig},function(t){return t.planesConfig}],function(t,n){var e=n.filter(function(t){return t.type!==S.NONE}).map(function(t){var n=t.slotting,e=t.slots;return{planeMin:n===E.FILL?e:0,planeMax:e}}).reduce(function(t,n){var e=t.min,r=t.max;return{min:e+n.planeMin,max:r+n.planeMax}},{min:0,max:0}),r=e.min,o=e.max,a=Math.max(r,t.baseSize);return{min:a,max:o,slots:Math.max(Math.min(t.slots,o),a)}}),Tt=function(t){function n(t,e,r){var o;return Object(p.a)(this,n),(o=Object(d.a)(this,Object(m.a)(n).call(this))).position=void 0,o.filledSlots=void 0,o.type=void 0,o.position=t,o.filledSlots=e,o.type=r,o}return Object(v.a)(n,t),Object(h.a)(n,[{key:"computeSlots",value:function(){return y.f(24).map(function(t){return{jr:t-14}}).reverse()}},{key:"theta",get:function(){switch(this.position){case A.LEAD:return 3*M/12;case A.LT:return 7*M/12;case A.RT:return 11*M/12}}}]),n}(bt),At=function(t){return t.reduce(function(t,n){return t+n.filledSlots},0)},Lt=function(t,n,e){var r=e.filter(function(t){var n=t.type,e=t.slotting;return n!==S.NONE&&e===E.FILL}).map(function(t){return{position:t.position,filledSlots:t.slots}});return function t(n,e,r,o){if(0===n.length)return o;var a=e/n.length,i=n.find(function(t){return t.position===A.LEAD});if(i&&r>a)return t(n.filter(function(t){return t.position!==A.LEAD}),e-r,r,[{position:A.LEAD,filledSlots:r}].concat(Object(D.a)(o)));var u=n.filter(function(t){return t.slots<a}).map(function(t){return{position:t.position,filledSlots:t.slots}});if(u.length){var s=u.map(function(t){return t.position});return t(n.filter(function(t){var n=t.position;return!s.includes(n)}),e-At(u),r,[].concat(Object(D.a)(o),Object(D.a)(u)))}var l=Math.floor(a),c=e%l;if(c>0&&i){var f={position:A.LEAD,filledSlots:l};return t(n.filter(function(t){return t.position!==A.LEAD}),e-l,r,[f].concat(Object(D.a)(o)))}var p=n.map(function(t,n){return{position:t.position,filledSlots:l+(c>n?1:0)}});return[].concat(Object(D.a)(o),Object(D.a)(p))}(e.filter(function(t){var n=t.type,e=t.slotting;return n!==S.NONE&&e!==E.FILL}),t-At(r),n,r)},It=function(t){return jt(t).slots},xt=function(t){return t.formationConfig.baseSize},Mt=Object(ct.a)([It,xt,function(t){return t.formationConfig.type}],function(t,n,e){return new wt(St(t,n,[[new Ot(n)]]).flat(),e)}),_t=Object(ct.a)([It,xt,function(t){return t.planesConfig.filter(function(t){return t.type!==S.NONE})}],function(t,n,e){var r=new Map(Lt(t,n,e).map(function(t){return[t.position,t.filledSlots]}));return e.map(function(t){var n=t.position,e=t.type;return new Tt(n,r.get(n),e)})}),Dt=Object(ct.a)([Mt,_t],function(t,n){return function(t,n,e){return n.flatMap(function(n,r){var o=e.filter(function(t){return t.planeId===r}).map(function(t){return t.formationSlotId});return dt(n,t,o).map(function(e){var o=e.formationSlotId,a=e.planeSlotId;return{formationSlotId:o,formationSlot:t.slots[o],formation:t,planeId:r,plane:n,planeSlotId:a,planeSlot:n.slots[a]}})})}(t,n,function(t,n){if(n[0].position!==A.LEAD)throw new Error("lead plane should be first");var e=n.map(function(){return[]}),r=Object(y.f)(t.slots.length),o=n.flatMap(function(t,n){return Array(t.filledSlots).fill(n)});return ht(r,o,pt(function(n,e){if(t.baseIds.includes(n))return 0===e?0:1e3})(function(e,r){var o=t.slots[e],a=n[r],i=o.position.plus(o.offset),u=_.unspin(i.theta-a.theta),s=_.unspin(o.offset.theta-x/2),l=ft(s,0)||ft(s,x)?A.LEAD:s>x?A.RT:A.LT,c=l===A.LEAD||a.position===A.LEAD||l===a.position?0:x;return Math.min(u,2*x-u)+c})).forEach(function(t){var n=Object(g.a)(t,2),r=n[0],o=n[1];return e[o].push(r)}),e.flatMap(function(t,n){return t.map(function(t){return{formationSlotId:t,planeId:n}})})}(t,n))}),Nt=Object(s.b)(function(t){return{formation:Mt(t),planes:_t(t),slots:Dt(t),viewConfig:t.viewConfig,fill:K(t.viewConfig.colorBy),label:W(t.viewConfig.numberBy)}})(lt),Rt=e(320),Bt=e(111),Pt=e(319),Ct=Object(s.b)(function(t){return{slotsOptions:jt(t),baseSize:t.formationConfig.baseSize,formationType:t.formationConfig.type}},function(t){return{onFormationSlotsSet:function(n){return t(function(t){return{type:"SET_FORMATION_SLOTS",slots:t}}(n))},onBaseSizeSet:function(n){return t({type:"SET_BASE_SIZE",baseSize:n})},onSetFormationType:function(n){return t({type:"SET_FORMATION_TYPE",formationType:n})}}})(function(t){var n=t.slotsOptions,e=n.min,r=n.max,o=n.slots,i=t.baseSize,u=t.formationType,s=t.onFormationSlotsSet,l=t.onBaseSizeSet,c=t.onSetFormationType,f=a.a.createElement("span",null,a.a.createElement(Bt.a,{name:"users"})," ",a.a.createElement("strong",null,"Slots:")," ",o),p=[{opt:T.HD,desc:"Head Down (from below)"},{opt:T.HD_ABOVE,desc:"Head Down (from above)"},{opt:T.HU,desc:"Head Up (from above)"}].map(function(t){var n=t.opt,e=t.desc;return a.a.createElement(Pt.a.Item,{key:n,onClick:function(){return c(n)},active:u===n},e)}),h=[4,6,8,10].map(function(t){return a.a.createElement(Pt.a.Item,{key:t,onClick:function(){return l(t)},active:i===t},t)});return a.a.createElement(Pt.a,{trigger:f,pointing:!0,className:"link item"},a.a.createElement(Pt.a.Menu,null,a.a.createElement(Pt.a.Header,null,"Slots"),a.a.createElement(Pt.a.Item,null,a.a.createElement("span",null,e," "),a.a.createElement("input",{type:"range",value:o,min:e,max:r,onChange:function(t){return s(parseInt(t.target.value))}}),a.a.createElement("span",null," ",r)),a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Base Size"),h,a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Formation Type"),p))}),Ft=(kt={},Object(N.a)(kt,S.OTTER,"Otter"),Object(N.a)(kt,S.SKYVAN,"Skyvan"),Object(N.a)(kt,S.NONE,"None"),kt),Ht=function(t){var n,e=t.planeConfig,r=t.setters,o=e.position,i=e.label,u=e.slotting,s=e.type,l=e.slots,c=r.onPlaneSlottingSet,f=r.onPlaneTypeSet,p=r.onPlaneSlotsSet,h=a.a.createElement("div",null,a.a.createElement("strong",null,i),": ",Ft[s],s!==S.NONE?", ".concat(l," slots, ").concat(u===E.FILL?"filled":"slotted evenly"):null),d=o===A.LEAD?[S.OTTER,S.SKYVAN]:[S.OTTER,S.SKYVAN,S.NONE],m=E.FILL,v=E.SPLIT,y=(n={},Object(N.a)(n,m,"Fill plane"),Object(N.a)(n,v,"Split evenly"),n),g=[v,m];return a.a.createElement(Pt.a.Item,null,a.a.createElement(Pt.a,{trigger:h,fluid:!0},a.a.createElement(Pt.a.Menu,null,a.a.createElement(Pt.a.Header,null,"Type"),d.map(function(t){return a.a.createElement(Pt.a.Item,{key:t,onClick:function(){return f(o,t)},active:s===t},Ft[t])}),a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Slotting"),g.map(function(t){return a.a.createElement(Pt.a.Item,{key:t,onClick:function(){return c(o,t)},active:u===t},y[t])}),a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Slots: ",l),a.a.createElement(Pt.a.Item,null,a.a.createElement("span",null,"0 "),a.a.createElement("input",{type:"range",value:l,min:0,max:30,onChange:function(t){return p(o,parseInt(t.target.value))}}),a.a.createElement("span",null," ",30)))))},Ut=Object(s.b)(function(t){return{planesConfig:t.planesConfig}},function(t){return{setters:{onPlaneTypeSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_TYPE",position:t,planeType:n}}(n,e))},onPlaneSlotsSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTS",position:t,slots:n}}(n,e))},onPlaneSlottingSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTTING",position:t,slotting:n}}(n,e))}}}})(function(t){var n=t.planesConfig,e=t.setters,r=n.filter(function(t){return t.type!==S.NONE}).length,o=a.a.createElement("span",null,a.a.createElement(Bt.a,{name:"plane"})," ",a.a.createElement("strong",null,"Planes:")," ",r);return a.a.createElement(Pt.a,{trigger:o,item:!0},a.a.createElement(Pt.a.Menu,null,n.map(function(t){return a.a.createElement(Ht,{key:t.position,planeConfig:t,setters:e})})))}),zt=Object(s.b)(function(t){return{viewConfig:t.viewConfig}},function(t){return{onSetColorBy:function(n){return t(function(t){return{type:"SET_COLOR_BY",colorBy:t}}(n))},onSetNumberBy:function(n){return t(function(t){return{type:"SET_NUMBER_BY",numberBy:t}}(n))},onSetShow:function(n){return t(function(t){return{type:"SET_SHOW",show:t}}(n))}}})(function(t){var n=t.viewConfig,e=t.onSetColorBy,r=t.onSetNumberBy,o=t.onSetShow,i=a.a.createElement("span",null,a.a.createElement(Bt.a,{name:"eye"})," ",a.a.createElement("strong",null,"View")),u=[{opt:w.DEFAULT,desc:"Default"},{opt:w.PLANE,desc:"Plane"},{opt:w.BUILD_ORDER,desc:"Build Order"},{opt:w.RADIAL,desc:"Radial"}].map(function(t){var r=t.opt,o=t.desc;return a.a.createElement(Pt.a.Item,{key:r,onClick:function(){return e(r)},active:n.colorBy===r},o)}),s=[{opt:k.SLOT_NUM,desc:"Slot Number"},{opt:k.BUILD_ORDER,desc:"Build Order"}].map(function(t){var e=t.opt,o=t.desc;return a.a.createElement(Pt.a.Item,{key:e,onClick:function(){return r(e)},active:n.numberBy===e},o)}),l=[{opt:j.FORMATION,desc:"Formation"},{opt:j.PLANES,desc:"Planes"},{opt:j.BOTH,desc:"Formation & Planes"}].map(function(t){var e=t.opt,r=t.desc;return a.a.createElement(Pt.a.Item,{key:e,onClick:function(){return o(e)},active:n.show===e},r)});return a.a.createElement(Pt.a,{trigger:i,item:!0},a.a.createElement(Pt.a.Menu,null,a.a.createElement(Pt.a.Header,null,"Color by"),u,a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Number by"),s,a.a.createElement(Pt.a.Divider,null),a.a.createElement(Pt.a.Header,null,"Show"),l))}),Yt=function(){return a.a.createElement(Rt.a,{size:"mini",secondary:!0},a.a.createElement(Ct,null),a.a.createElement(Ut,null),a.a.createElement(zt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Gt=A.LEAD,Vt=A.LT,Kt=A.RT,Wt=[{position:Gt,label:"Lead",slotting:E.SPLIT,type:S.OTTER,slots:23},{position:Vt,label:"Left Trail",slotting:E.SPLIT,type:S.NONE,slots:23},{position:Kt,label:"Right Trail",slotting:E.SPLIT,type:S.OTTER,slots:23}],qt=Object(l.combineReducers)({planesConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,n=arguments.length>1?arguments[1]:void 0,e=n.position;return t.map(function(t){if(t.position!==e)return t;switch(n.type){case"SET_PLANE_SLOTTING":return Object(mt.a)({},t,{slotting:n.slotting});case"SET_PLANE_SLOTS":return Object(mt.a)({},t,{slots:n.slots});case"SET_PLANE_TYPE":return Object(mt.a)({},t,{type:n.planeType});default:return t}})},formationConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slots:42,baseSize:6,type:T.HD},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_FORMATION_SLOTS":return Object(mt.a)({},t,{slots:n.slots});case"SET_BASE_SIZE":return Object(mt.a)({},t,{baseSize:n.baseSize});case"SET_FORMATION_TYPE":return Object(mt.a)({},t,{type:n.formationType});default:return t}},viewConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{colorBy:w.PLANE,numberBy:k.SLOT_NUM,show:j.BOTH},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_COLOR_BY":return Object(mt.a)({},t,{colorBy:n.colorBy});case"SET_NUMBER_BY":return Object(mt.a)({},t,{numberBy:n.numberBy});case"SET_SHOW":return Object(mt.a)({},t,{show:n.show});default:return t}}}),Jt=Object(l.createStore)(qt,Object(c.composeWithDevTools)());u.a.render(a.a.createElement(s.a,{store:Jt},a.a.createElement(function(){return a.a.createElement(f.a,{fluid:!0,style:{marginTop:"10px",height:"100vh"}},a.a.createElement(Yt,null),a.a.createElement(Nt,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[176,1,2]]]);
//# sourceMappingURL=main.03dcf64f.chunk.js.map