(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(t,n,e){t.exports=e(309)},183:function(t,n,e){},309:function(t,n,e){"use strict";e.r(n);var r,o=e(0),a=e.n(o),i=e(34),u=e.n(i),l=e(29),s=e(39),c=e(149),f=e(314),h=e(14),p=e(15),d=e(22),m=e(21),v=e(23),g=e(8),O=(e(183),e(51)),y=function(){function t(){Object(h.a)(this,t),this.group=void 0}return Object(p.a)(t,[{key:"withGroup",value:function(t){return this.group=t,this}}]),t}();!function(t){t.LEAD="lead",t.LT="lt",t.RT="rt"}(r||(r={}));var S,E,b,w,k,j,A=r;!function(t){t.SPLIT="Split",t.FILL="Fill"}(S||(S={})),function(t){t.NONE="None",t.OTTER="Otter",t.SKYVAN="Skyvan"}(E||(E={})),function(t){t.DEFAULT="DEFAULT",t.PLANE="PLANE",t.BUILD_ORDER="BUILD_ORDER",t.RADIAL="RADIAL"}(b||(b={})),function(t){t.SLOT_NUM="SLOT_NUM",t.BUILD_ORDER="BUILD_ORDER"}(w||(w={})),function(t){t.FORMATION="Formation",t.PLANES="Planes",t.BOTH="Formation & planes"}(k||(k={})),function(t){t.HD="HD",t.SD="SD"}(j||(j={}));var T=Math.PI,L=2*T,I=function(){function t(n,e){Object(h.a)(this,t),this.radius=void 0,this.theta=void 0,this.radius=n,this.theta=t.unspin(e)}return Object(p.a)(t,[{key:"toString",value:function(){return"(r".concat(this.radius,",\u2220").concat(this.theta/L,"\u03c4)")}},{key:"plus",value:function(n){var e=this.radius,r=this.theta,o=n.radius,a=n.theta;return new t(Math.sqrt(e*e+o*o+2*e*o*Math.cos(a-r)),r+Math.atan2(o*Math.sin(a-r),e+o*Math.cos(a-r)))}},{key:"minus",value:function(t){return this.plus(t.rotate(T))}},{key:"rotate",value:function(n){return new t(this.radius,this.theta+n)}},{key:"distanceFrom",value:function(t){return this.minus(t).radius}},{key:"angleFrom",value:function(t){return this.minus(t).theta}},{key:"angleTo",value:function(t){return t.minus(this).theta}},{key:"scale",value:function(n){return new t(this.radius*n,this.theta)}},{key:"d3theta",get:function(){return t.unspin(-this.theta+T/2)}},{key:"x",get:function(){return this.radius*Math.cos(this.theta)}},{key:"y",get:function(){return-this.radius*Math.sin(this.theta)}}],[{key:"unspin",value:function(t){return t-2*Math.floor(t/(2*T))*T}}]),t}(),M=function(t){var n=t.formationSlot,e=n.position,r=n.dockAngle,o=e.scale(80);return g.a()({outerRadius:o.radius,innerRadius:o.radius,startAngle:o.d3theta-r,endAngle:o.d3theta+r})},_={DEFAULT:function(){return null},BUILD_ORDER:function(t){var n,e=t.formationSlot.buildOrder;return g.g(g.h).domain((n=12,g.f(n).map(function(t){return t.toString()})))((e-1).toString())},PLANE:function(t){return g.g(g.h.filter(function(t,n){return[0,2,4].includes(n)})).domain([A.LEAD,A.LT,A.RT])(t.plane.position)},RADIAL:function(t){var n=t.formationSlot,e=n.offset.plus(n.position).theta/L;return g.d(e)}},N={SLOT_NUM:function(t){return t.formationSlotId+1},BUILD_ORDER:function(t){return t.formationSlot.buildOrder}},D=function(t){return t.formationSlot.position.scale(80).x},x=function(t){return t.formationSlot.position.scale(80).y},R=function(t){return t.planeSlot.x*P},B=function(t){return t.planeSlot.y*P},P=40,C=function(t){g.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(g.b.overshoot(3)).attr("r",20)},F=function(t){g.j('[formationSlotId="'.concat(t.formationSlotId,'"].slot circle')).transition().ease(g.b.overshoot(3)).attr("r",16)},U=function(t,n,e,r,o){return t.append("g").classed("slot",!0).on("mouseover",C).on("mouseout",F).attr("formationSlotId",function(t){return t.formationSlotId}).call(function(t){t.append("circle").attr("r",16).call(function(t){n&&t.attr("cx",n),e&&t.attr("cy",e),r&&t.attr("fill",r)}),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").call(function(t){n&&t.attr("x",n),e&&t.attr("y",e),o&&t.text(o)})})},z=function(t,n,e,r,o){t.select("g.slot circle").attr("cx",n).attr("cy",e).attr("fill",r),t.select("g.slot text").attr("x",n).attr("y",e).text(o)},H=function(t,n){return t.transition(n).attr("transform","scale(0)").remove()},Y=1.5,G=[{x:-Y,y:-7},{x:Y,y:-7},{x:Y,y:6},{x:-Y,y:6},{x:-Y,y:-7}],V=[{x:-Y,y:0},{x:-Y,y:4}],K=g.e().x(function(t){return t.x*P}).y(function(t){return t.y*P}),W=function(t){function n(){return Object(h.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(p.a)(n,[{key:"draw",value:function(t){var n=function(t){var n=t.planes,e=t.viewConfig.show,r=t.formation.radius;switch(e){case k.FORMATION:return new Map;case k.PLANES:var o=n.map(function(t){return t.position});return new Map([A.LT,A.LEAD,A.RT].filter(function(t){return o.includes(t)}).map(function(t,n,e){var r=300*n-150*(e.length-1);return[t,new I(Math.abs(r),r>=0?0:T)]}));case k.BOTH:return new Map(n.map(function(t){var n=t.position,e=t.theta;return[n,new I(80*Math.max(7,r+3),n===A.LEAD?L/12:e)]}))}}(t),e=t.fill,r=t.label,o=Array.from(t.slots.reduce(function(t,n){var e=t.get(n.plane)||[];return e.push(n),t.set(n.plane,e)},new Map)).map(function(t){var n=Object(O.a)(t,2);return{plane:n[0],slotData:n[1]}}),a=g.k().duration(1e3);this.group.selectAll("g.plane").data(o,function(t){return t.plane.position}).join(function(t){return t.append("g").classed("plane",!0).call(function(t){t.append("path").attr("d",K(G)),t.append("path").attr("stroke-width",3).attr("d",K(V)),t.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",0).attr("y",-260).text(function(t){return t.plane.position})}).attr("transform","translate(0,0) scale(0)")},void 0,function(t){return H(t,a)}).transition(a).attr("transform",function(t){var e=t.plane.position;return"translate(".concat(n.get(e).x,",").concat(n.get(e).y,") scale(1)")}).selection().selectAll("g.slot").data(function(t){return t.slotData},function(t){return"".concat(t.formationSlotId,".").concat(t.planeId)}).join(function(t){return U(t)},void 0,function(t){return H(t,a)}).transition(a).attr("transform","scale(1)").call(function(t){z(t,R,B,e,r)})}}]),n}(y),q=function(t){function n(){return Object(h.a)(this,n),Object(d.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(v.a)(n,t),Object(p.a)(n,[{key:"draw",value:function(t){var n=t.slots,e=t.viewConfig,r=t.fill,o=t.label,a=e.show===k.PLANES?[]:n,i=g.k().duration(1e3);this.group.selectAll("g.slotgroup").data(a,function(t){return t.formationSlotId.toString()}).join(function(t){return t.append("g").attr("class","slotgroup").attr("transform","translate(0,0) scale(0)").call(function(t){t.append("path").attr("class","grips").attr("d",M),U(t,D,x,r,o)})},void 0,function(t){return H(t,i)}).transition(i).attr("transform",function(t){return function(t){var n=t.formationSlot.offset;return"translate(".concat(n.scale(80).x,",").concat(n.scale(80).y,")")}(t)+" scale(1)"}).call(function(t){t.select("path").attr("d",M),z(t,D,x,r,o)})}}]),n}(y),J=function(t){function n(){var t,e;Object(h.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(o)))).svg=void 0,e.allGrp=void 0,e.zoom=void 0,e.formationDrawer=void 0,e.planesDrawer=void 0,e}return Object(v.a)(n,t),Object(p.a)(n,[{key:"height",value:function(){return parseInt(this.svg.style("height"),10)}},{key:"width",value:function(){return parseInt(this.svg.style("width"),10)}},{key:"componentDidMount",value:function(){var t=this;this.allGrp=this.svg.append("g"),this.zoom=g.l().scaleExtent([.5,2]).on("zoom",function(){return t.allGrp.attr("transform",g.c.transform)}),this.svg.call(this.zoom).call(this.zoom.translateBy,this.width()/2,this.height()/2),this.formationDrawer=(new q).withGroup(this.allGrp.append("g")),this.formationDrawer.draw(this.props),this.planesDrawer=(new W).withGroup(this.allGrp.append("g")),this.planesDrawer.draw(this.props)}},{key:"componentDidUpdate",value:function(){this.formationDrawer.draw(this.props),this.planesDrawer.draw(this.props)}},{key:"render",value:function(){var t=this;return a.a.createElement("svg",{width:"100%",height:"100%",ref:function(n){return t.svg=g.i(n)}})}}]),n}(a.a.Component),Z=e(52),$=e(18);function Q(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);return Math.abs(t-n)<e}var X=function(t,n,e){if(t.length!==n.length)throw new Error("as and bs have diff lenghts");var r=function(t,n){if("object"===typeof n){var e=n;n=function(t,n){return e[t][n]}}var r,o,a=0;for(r=0;r<t;r++)for(o=0;o<t;o++)a+=n(r,o);var i,u,l,s,c,f,h,p,d,m,v,g,O,y,S,E,b,w,k,j,A=a/t*1e4,T=a/t/1e4,L=new Int32Array(t),I=new Int32Array(t),M=new Float64Array(t),_=new Float64Array(t),N=0,D=new Int32Array(t),x=new Int32Array(t),R=new Int32Array(t),B=new Float64Array(t),P=new Int32Array(t);for(u=0;u<t;u++)R[u]=0;for(d=t;d--;){for(E=n(0,d),l=0,u=1;u<t;u++)n(u,d)<E&&(E=n(u,d),l=u);_[d]=E,1===++R[l]?(L[l]=d,I[d]=l):_[d]<_[L[l]]?(m=L[l],L[l]=d,I[d]=l,I[m]=-1):I[d]=-1}for(u=0;u<t;u++)if(0===R[u])D[N++]=u;else if(1===R[u]){for(m=L[u],E=A,d=0;d<t;d++)d!==m&&n(u,d)-_[d]<E+T&&(E=n(u,d)-_[d]);_[m]=_[m]-E}var C=0;do{for(C++,h=0,s=N,N=0;h<s;){for(u=D[h],h++,w=n(u,0)-_[0],m=0,k=A,d=1;d<t;d++)(b=n(u,d)-_[d])<k&&(b>=w?(k=b,v=d):(k=w,w=b,v=m,m=d));f=I[m],w<k+T?_[m]=_[m]-(k+T-w):f>-1&&(m=v,f=I[v]),L[u]=m,I[m]=u,f>-1&&(w<k?D[--h]=f:D[N++]=f)}}while(C<2);for(c=0;c<N;c++){for(p=D[c],d=t;d--;)B[d]=n(p,d)-_[d],P[d]=p,x[d]=d;y=0,S=0,i=!1;do{if(S===y){for(O=y-1,E=B[x[S++]],h=S;h<t;h++)(b=B[d=x[h]])<=E&&(b<E&&(S=y,E=b),x[h]=x[S],x[S++]=d);for(h=y;h<S;h++)if(I[x[h]]<0){g=x[h],i=!0;break}}if(!i)for(m=x[y],y++,b=n(u=I[m],m)-_[m]-E,h=S;h<t;h++)if((j=n(u,d=x[h])-_[d]-b)<B[d]){if(P[d]=u,j===E){if(I[d]<0){g=d,i=!0;break}x[h]=x[S],x[S++]=d}B[d]=j}}while(!i);for(h=O+1;h--;)_[m=x[h]]=_[m]+B[m]-E;do{u=P[g],I[g]=u,m=g,g=L[u],L[u]=m}while(u!==p)}var F=0;for(u=t;u--;)d=L[u],M[u]=n(u,d)-_[d],F+=n(u,d);return{cost:F,row:L,col:I,u:M,v:_}}(t.length,function(t,n,e){var r=new Map;return function(o,a){var i="".concat(o,".").concat(a);if(!r.has(i)){var u=t[o],l=n[a];r.set(i,e(u,l))}return r.get(i)}}(t,n,e));if(!r.row.every(function(n){return n>=0&&n<t.length})||new Set(r.row).size!=t.length){var o=t.flatMap(function(t){return n.map(function(n){return{a:t,b:n,score:e(t,n)}})});console.log("something's weird",{allScores:o,result:r})}return Array.from(r.row).map(function(e,r){return[t[r],n[e]]})};var tt=function(t,n,e){return X(e,g.f(t.filledSlots),function(e,r){var o=n.slots[e],a=o.reverseBuildOrder,i=t.slots[r].jr,u=o.offset.plus(o.position).y;return Math.abs(i)*a*100-u*i}).map(function(t){var n=Object(O.a)(t,2);return{formationSlotId:n[0],planeSlotId:n[1]}})};var nt=e(25),et=function(){function t(n,e){if(Object(h.a)(this,t),this.slots=void 0,this.slotNumOffset=void 0,n<0)throw new Error("slots should be non-negative, was ".concat(n));this.slots=n,this.slotNumOffset=e}return Object(p.a)(t,[{key:"checkSlot",value:function(t){if(t<0||t>=this.slots)throw new Error("slot should be in [0, ".concat(this.slots,"), was ").concat(t))}},{key:"slotData",value:function(t){return this.checkSlot(t),{offset:this.position(),position:this.slotPosition(t),dockAngle:this.dockAngle(),buildOrder:this.buildOrder(t)+this.waiting()}}},{key:"allSlots",value:function(){var t=this;return Object(g.f)(this.slots).map(function(n){return t.slotData(n)})}},{key:"slotPosition",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.checkSlot(t);var e=new I(this.radius(),this.rotation()-2*t*this.dockAngle());return n?e.plus(this.position()):e}},{key:"dockPosition",value:function(t){return this.checkSlot(t),this.slotPosition(t).rotate(-this.dockAngle()).plus(this.position())}},{key:"waiting",value:function(){return Math.max.apply(Math,Object($.a)(this.parents().map(function(t){return t.waiting()+t.maxBuildOrder()})).concat([0]))}}]),t}(),rt=function(t){function n(t,e,r,o){var a;return Object(h.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).left=void 0,a.right=void 0,a.firstRun=void 0,a._prrd=void 0,a.left=r,a.right=o,a.firstRun=!0,a}return Object(v.a)(n,t),Object(p.a)(n,[{key:"parents",value:function(){return Array.from(new Set([this.left.c,this.right.c]))}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"maxBuildOrder",value:function(){return Math.ceil(this.slots/2)}},{key:"buildOrder",value:function(t){return this.checkSlot(t),Math.min(t+1,this.slots-t)}},{key:"prrd",get:function(){return this._prrd||(this._prrd=n._positionRadiusRotationDockAngle(this.left.c.dockPosition(this.left.s),this.right.c.dockPosition(this.right.s),this.slots)),this._prrd}}],[{key:"_positionRadiusRotationDockAngle",value:function(t,e,r){var o=t.distanceFrom(e),a=n.__computeRadiusTheta(r,o),i=a.radius,u=a.theta,l=t.angleTo(e),s=t.plus(new I(i,l-(T-u)/2)),c=(L-u)/(2*r),f=s.angleTo(e)-c;return{position:s,radius:i,rotation:f,dockAngle:c}}},{key:"__computeRadiusTheta",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.sqrt(Number.EPSILON);if(n<0||n>t)throw console.error("d: ".concat(n,", s: ").concat(t)),new Error("d must be in [0, s]");var r=0;function o(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;if(r>=100)throw new Error("didn't converge");r+=1;var u=(i+a)/2,l=n/(2*Math.sin(u/2))*(L-u);return Math.abs(l-t)<e?u:l>t?o(u,i):o(a,u)}var a=o();return{radius:t/(L-o()),theta:a}}}]),n}(et),ot=function(t){function n(t,e,r,o){var a;if(Object(h.a)(this,n),(a=Object(d.a)(this,Object(m.a)(n).call(this,t,e))).dock=void 0,a.hand=void 0,a._prrd=void 0,a.dock=r,"left"!==o&&"right"!==o)throw new Error("Hand should be 'left' or 'right'");return a.hand=o,a}return Object(v.a)(n,t),Object(p.a)(n,[{key:"parents",value:function(){return[this.dock.c]}},{key:"_left",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.dockPosition(e):n.slotPosition(e).rotate(-3*n.dockAngle()).plus(n.position())}},{key:"_right",value:function(){var t=this.dock,n=t.c,e=t.s;return"left"===this.hand?n.slotPosition(e).rotate(n.dockAngle()).plus(n.position()):n.dockPosition(e)}},{key:"maxBuildOrder",value:function(){return this.slots}},{key:"buildOrder",value:function(t){return this.checkSlot(t),"left"===this.hand?this.slots-t:t+1}},{key:"position",value:function(){return this.prrd.position}},{key:"radius",value:function(){return this.prrd.radius}},{key:"rotation",value:function(){return this.prrd.rotation}},{key:"dockAngle",value:function(){return this.prrd.dockAngle}},{key:"prrd",get:function(){if(!this._prrd){var t=2*this.slots+1;if(this._prrd=rt._positionRadiusRotationDockAngle(this._left(),this._right(),t),"left"===this.hand){var n=t-this.slots,e=this._prrd,r=e.rotation,o=e.dockAngle,a=I.unspin(r-2*n*o);this._prrd.rotation=a}}return this._prrd}}]),n}(et),at=function(t){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3*T/2;return Object(h.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this,t,0)))._rotation=void 0,e._rotation=r,e}return Object(v.a)(n,t),Object(p.a)(n,[{key:"rotation",value:function(){return this._rotation}},{key:"position",value:function(){return new I(0,0)}},{key:"radius",value:function(){return this.slots/L}},{key:"dockAngle",value:function(){return L/(2*this.slots)}},{key:"maxBuildOrder",value:function(){return 1}},{key:"buildOrder",value:function(t){return this.checkSlot(t),1}},{key:"parents",value:function(){return[]}}]),n}(et),it=function(){function t(){Object(h.a)(this,t),this._slots=void 0}return Object(p.a)(t,[{key:"slots",get:function(){return this._slots||(this._slots=this.computeSlots()),this._slots}}]),t}(),ut=function t(n,e){var r=Math.round(n/2),o=r>2;return 0===e?n:1===e?n+5*r:2===e?n+10*r:3===e?t(n,e-1)+(o?3*r:5*r):4===e?t(n,e-1)+(o?5*r:5*n):t(n,4)+(e-4)*(o?5*r:5*n)},lt=function t(n,e,r){var o=r.length-1,a=Math.min(n,ut(e,o+1))-ut(e,o);if(a<=0)return r;var i=function(t,n){if(n.length>10)throw new Error("somethings fucky");var e=4!==t;if(1===n.length){var r=n[0][0];return g.f(0,t,2).map(function(n){return{left:{c:r,s:n},right:{c:r,s:(n+t-1)%t}}})}if(!e||2===n.length||4===n.length||n.length>=6)return n[n.length-1].map(function(t){var n=5===t.slots;return{left:{c:t,s:1+(n?1:0)},right:{c:t,s:0+(n?1:0)}}});if(e&&3===n.length){var o=n[1],a=o.length;return g.f(a).map(function(t){return{left:{c:o[(t+1)%a],s:0},right:{c:o[t],s:3}}})}if(e&&5===n.length){var i=n[2],u=n[4];return i.flatMap(function(t,n){return[t,u[n]]}).map(function(t){return{left:{c:t,s:5===t.slots?2:1},right:{c:t,s:5===t.slots?1:0}}})}throw new Error("mmm")}(e,r),u=i.length,l=Math.floor(a/u),s=a%u,c=i.flatMap(function(t,n){var r=t.left,a=t.right,i=l+(n<s?1:0),u=r.c===a.c?5:3,c=ut(e,o)+l*n+Math.min(s,n);if(i===u)return[new rt(u,c,r,a)];var f=Math.floor(i/2),h=f+i%2,p=[];return f>0&&p.push(new ot(f,c+h,r,"left")),h>0&&p.push(new ot(h,c,a,"right")),p});return t(n,e,[].concat(Object($.a)(r),[c]))},st=function(t){function n(t){var e;return Object(h.a)(this,n),(e=Object(d.a)(this,Object(m.a)(n).call(this))).components=void 0,e.components=t,e}return Object(v.a)(n,t),Object(p.a)(n,[{key:"computeSlots",value:function(){var t=this.reverseBuildOrder();return this.components.flatMap(function(t){return t.allSlots()}).map(function(n,e){return Object(nt.a)({},n,{reverseBuildOrder:t[e]})})}},{key:"reverseBuildOrder",value:function(){var t=new Map(this.components.map(function(t){return[t,[]]}));this.components.flatMap(function(t){return t.parents().map(function(n){return{parent:n,child:t}})}).forEach(function(n){var e=n.parent,r=n.child;return t.get(e).push(r)});var n=new Map;return this.components.flatMap(function(e){return g.f(e.slots).map(function(r){return function e(r){if(!n.has(r)){var o=t.get(r),a=Math.max.apply(Math,Object($.a)(o.map(function(t){return e(t)+t.maxBuildOrder()})).concat([0]));n.set(r,a)}return n.get(r)}(e)+e.maxBuildOrder()-e.buildOrder(r)})})}},{key:"baseIds",get:function(){return this.components.find(function(t){return t instanceof at}).allSlots().map(function(t,n){return n})}},{key:"radius",get:function(){var t=this.slots.map(function(t){var n=t.position,e=t.offset;return n.plus(e).radius});return Math.max.apply(Math,Object($.a)(t))}}]),n}(it);var ct=Object(Z.a)([function(t){return t.formationConfig},function(t){return t.planesConfig}],function(t,n){var e=n.filter(function(t){return t.type!==E.NONE}).map(function(t){var n=t.slotting,e=t.slots;return{planeMin:n===S.FILL?e:0,planeMax:e}}).reduce(function(t,n){var e=t.min,r=t.max;return{min:e+n.planeMin,max:r+n.planeMax}},{min:0,max:0}),r=e.min,o=e.max,a=Math.max(r,t.baseSize);return{min:a,max:o,slots:Math.max(Math.min(t.slots,o),a)}}),ft=function(t){function n(){var t,e;Object(h.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=Object(d.a)(this,(t=Object(m.a)(n)).call.apply(t,[this].concat(o)))).jrOffset=1,e}return Object(v.a)(n,t),Object(p.a)(n,[{key:"computeSlots",value:function(){var t=this,n=g.f(7).map(function(n){return{x:-2,y:5.5-n,jr:-n+t.jrOffset+8}}),e=g.f(3).map(function(n){return{x:-1,y:3-n,jr:-n+t.jrOffset+1}}),r=g.f(2).map(function(n){return{x:0,y:2.5-n,jr:-n+t.jrOffset+-2}}),o=g.f(6).flatMap(function(n){return[{x:-.5,y:-.5-n,jr:-2*n+t.jrOffset-5},{x:.5,y:-.5-n,jr:-2*n+t.jrOffset-4}]});return[].concat(Object($.a)(n),Object($.a)(e),Object($.a)(r),Object($.a)(o))}}]),n}(function(t){function n(t,e){var r;return Object(h.a)(this,n),(r=Object(d.a)(this,Object(m.a)(n).call(this))).position=void 0,r.filledSlots=void 0,r.position=t,r.filledSlots=e,r}return Object(v.a)(n,t),Object(p.a)(n,[{key:"theta",get:function(){switch(this.position){case A.LEAD:return 3*L/12;case A.LT:return 7*L/12;case A.RT:return 11*L/12}}}]),n}(it)),ht=function(t){return t.reduce(function(t,n){return t+n.filledSlots},0)},pt=function(t,n,e){var r=e.filter(function(t){var n=t.type,e=t.slotting;return n!==E.NONE&&e===S.FILL}).map(function(t){return{position:t.position,filledSlots:t.slots}});return function t(n,e,r,o){if(0===n.length)return o;var a=e/n.length,i=n.find(function(t){return t.position===A.LEAD});if(i&&r>a)return t(n.filter(function(t){return t.position!==A.LEAD}),e-r,r,[{position:A.LEAD,filledSlots:r}].concat(Object($.a)(o)));var u=n.filter(function(t){return t.slots<a}).map(function(t){return{position:t.position,filledSlots:t.slots}});if(u.length){var l=u.map(function(t){return t.position});return t(n.filter(function(t){var n=t.position;return!l.includes(n)}),e-ht(u),r,[].concat(Object($.a)(o),Object($.a)(u)))}var s=Math.floor(a),c=e%s;if(c>0&&i){var f={position:A.LEAD,filledSlots:s};return t(n.filter(function(t){return t.position!==A.LEAD}),e-s,r,[f].concat(Object($.a)(o)))}var h=n.map(function(t,n){return{position:t.position,filledSlots:s+(c>n?1:0)}});return[].concat(Object($.a)(o),Object($.a)(h))}(e.filter(function(t){var n=t.type,e=t.slotting;return n!==E.NONE&&e!==S.FILL}),t-ht(r),n,r)},dt=function(t){return ct(t).slots},mt=function(t){return t.formationConfig.baseSize},vt=Object(Z.a)([dt,mt],function(t,n){return new st(lt(t,n,[[new at(n)]]).flat())}),gt=Object(Z.a)([dt,mt,function(t){return t.planesConfig.filter(function(t){return t.type!==E.NONE})}],function(t,n,e){var r=new Map(pt(t,n,e).map(function(t){return[t.position,t.filledSlots]}));return e.map(function(t){var n=t.position,e=t.type;return function(t,n,e){switch(e){case E.OTTER:return new ft(t,n);case E.SKYVAN:throw new Error("SKYVAN not implemented");case E.NONE:throw new Error("PLaneType is NONE")}}(n,r.get(n),e)})}),Ot=Object(Z.a)([vt,gt],function(t,n){var e=function(t,n,e){return n.flatMap(function(n,r){var o=e.filter(function(t){return t.planeId===r}).map(function(t){return t.formationSlotId});return tt(n,t,o).map(function(e){var o=e.formationSlotId,a=e.planeSlotId;return{formationSlotId:o,formationSlot:t.slots[o],planeId:r,plane:n,planeSlotId:a,planeSlot:n.slots[a]}})})}(t,n,function(t,n){var e;if(n[0].position!==A.LEAD)throw new Error("lead plane should be first");var r=n.map(function(){return[]});(e=r[0]).push.apply(e,Object($.a)(t.baseIds));var o=Array.from(t.slots.keys()).filter(function(t){return!r.flat().includes(t)}),a=n.flatMap(function(t,n){var e=t.filledSlots-r[n].length;return Array(e).fill(n)});return X(o,a,function(e,r){var o=t.slots[e],a=n[r],i=o.position.plus(o.offset),u=I.unspin(i.theta-a.theta),l=I.unspin(o.offset.theta-T/2),s=Q(l,0)||Q(l,T)?A.LEAD:l>T?A.RT:A.LT,c=s===A.LEAD||a.position===A.LEAD||s===a.position?0:T;return Math.min(u,2*T-u)+c}).forEach(function(t){var n=Object(O.a)(t,2),e=n[0],o=n[1];return r[o].push(e)}),r.flatMap(function(t,n){return t.map(function(t){return{formationSlotId:t,planeId:n}})})}(t,n));return console.log({slots:e.map(function(t){return{formationSlotId:t.formationSlotId,planeId:t.planeId,planeSlotId:t.planeSlotId}})}),e}),yt=Object(l.b)(function(t){return{formation:vt(t),planes:gt(t),slots:Ot(t),viewConfig:t.viewConfig,fill:_[t.viewConfig.colorBy],label:N[t.viewConfig.numberBy]}})(J),St=e(316),Et=e(110),bt=e(315),wt=Object(l.b)(function(t){return{slotsOptions:ct(t),baseSize:t.formationConfig.baseSize}},function(t){return{onFormationSlotsSet:function(n){return t(function(t){return{type:"SET_FORMATION_SLOTS",slots:t}}(n))},onBaseSizeSet:function(n){return t({type:"SET_BASE_SIZE",baseSize:n})}}})(function(t){var n=t.slotsOptions,e=n.min,r=n.max,o=n.slots,i=t.baseSize,u=t.onFormationSlotsSet,l=t.onBaseSizeSet,s=a.a.createElement("span",null,a.a.createElement(Et.a,{name:"users"})," ",a.a.createElement("strong",null,"Slots:")," ",o);return a.a.createElement(bt.a,{trigger:s,pointing:!0,className:"link item"},a.a.createElement(bt.a.Menu,null,a.a.createElement(bt.a.Item,null,a.a.createElement("span",null,e," "),a.a.createElement("input",{type:"range",value:o,min:e,max:r,onChange:function(t){return u(parseInt(t.target.value))}}),a.a.createElement("span",null," ",r)),a.a.createElement(bt.a.Item,null,a.a.createElement(bt.a,{trigger:a.a.createElement("span",null,a.a.createElement("strong",null,"Base Size"),": ",i)},a.a.createElement(bt.a.Menu,null,[4,6,8,10].map(function(t){return a.a.createElement(bt.a.Item,{key:t,onClick:function(){return l(t)},active:i===t},t)}))))))}),kt=e(60),jt=function(t){var n,e=t.planeConfig,r=t.setters,o=e.position,i=e.label,u=e.slotting,l=e.type,s=e.slots,c=r.onPlaneSlottingSet,f=r.onPlaneTypeSet,h=r.onPlaneSlotsSet,p=a.a.createElement("div",null,a.a.createElement("strong",null,i),": ",l,l!==E.NONE?", ".concat(s," slots, ").concat(u===S.FILL?"filled":"slotted evenly"):null),d=o===A.LEAD?[E.OTTER,E.SKYVAN]:[E.OTTER,E.SKYVAN,E.NONE],m=S.FILL,v=S.SPLIT,g=(n={},Object(kt.a)(n,m,"Fill plane"),Object(kt.a)(n,v,"Split evenly"),n),O=[v,m];return a.a.createElement(bt.a.Item,null,a.a.createElement(bt.a,{trigger:p,fluid:!0},a.a.createElement(bt.a.Menu,null,a.a.createElement(bt.a.Header,null,"Type"),d.map(function(t){return a.a.createElement(bt.a.Item,{key:t,onClick:function(){return f(o,t)},active:l===t},t)}),a.a.createElement(bt.a.Divider,null),a.a.createElement(bt.a.Header,null,"Slotting"),O.map(function(t){return a.a.createElement(bt.a.Item,{key:t,onClick:function(){return c(o,t)},active:u===t},g[t])}),a.a.createElement(bt.a.Divider,null),a.a.createElement(bt.a.Header,null,"Slots: ",s),a.a.createElement(bt.a.Item,null,a.a.createElement("span",null,"0 "),a.a.createElement("input",{type:"range",value:s,min:0,max:30,onChange:function(t){return h(o,parseInt(t.target.value))}}),a.a.createElement("span",null," ",30)))))},At=Object(l.b)(function(t){return{planesConfig:t.planesConfig}},function(t){return{setters:{onPlaneTypeSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_TYPE",position:t,planeType:n}}(n,e))},onPlaneSlotsSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTS",position:t,slots:n}}(n,e))},onPlaneSlottingSet:function(n,e){return t(function(t,n){return{type:"SET_PLANE_SLOTTING",position:t,slotting:n}}(n,e))}}}})(function(t){var n=t.planesConfig,e=t.setters,r=n.filter(function(t){return t.type!==E.NONE}).length,o=a.a.createElement("span",null,a.a.createElement(Et.a,{name:"plane"})," ",a.a.createElement("strong",null,"Planes:")," ",r);return a.a.createElement(bt.a,{trigger:o,item:!0},a.a.createElement(bt.a.Menu,null,n.map(function(t){return a.a.createElement(jt,{key:t.position,planeConfig:t,setters:e})})))}),Tt=Object(l.b)(function(t){return{viewConfig:t.viewConfig}},function(t){return{onSetColorBy:function(n){return t(function(t){return{type:"SET_COLOR_BY",colorBy:t}}(n))},onSetNumberBy:function(n){return t(function(t){return{type:"SET_NUMBER_BY",numberBy:t}}(n))},onSetShow:function(n){return t(function(t){return{type:"SET_SHOW",show:t}}(n))}}})(function(t){var n=t.viewConfig,e=t.onSetColorBy,r=t.onSetNumberBy,o=t.onSetShow,i=a.a.createElement("span",null,a.a.createElement(Et.a,{name:"eye"})," ",a.a.createElement("strong",null,"View")),u=[{opt:b.DEFAULT,desc:"Default"},{opt:b.PLANE,desc:"Plane"},{opt:b.BUILD_ORDER,desc:"Build Order"},{opt:b.RADIAL,desc:"Radial"}].map(function(t){var r=t.opt,o=t.desc;return a.a.createElement(bt.a.Item,{key:r,onClick:function(){return e(r)},active:n.colorBy===r},o)}),l=[{opt:w.SLOT_NUM,desc:"Slot Number"},{opt:w.BUILD_ORDER,desc:"Build Order"}].map(function(t){var e=t.opt,o=t.desc;return a.a.createElement(bt.a.Item,{key:e,onClick:function(){return r(e)},active:n.numberBy===e},o)}),s=[{opt:k.FORMATION,desc:"Formation"},{opt:k.PLANES,desc:"Planes"},{opt:k.BOTH,desc:"Formation & Planes"}].map(function(t){var e=t.opt,r=t.desc;return a.a.createElement(bt.a.Item,{key:e,onClick:function(){return o(e)},active:n.show===e},r)});return a.a.createElement(bt.a,{trigger:i,item:!0},a.a.createElement(bt.a.Menu,null,a.a.createElement(bt.a.Header,null,"Color by"),u,a.a.createElement(bt.a.Divider,null),a.a.createElement(bt.a.Header,null,"Number by"),l,a.a.createElement(bt.a.Divider,null),a.a.createElement(bt.a.Header,null,"Show"),s))}),Lt=function(){return a.a.createElement(St.a,{size:"mini",secondary:!0},a.a.createElement(wt,null),a.a.createElement(At,null),a.a.createElement(Tt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=A.LEAD,Mt=A.LT,_t=A.RT,Nt=[{position:It,label:"Lead",slotting:S.SPLIT,type:E.OTTER,slots:23},{position:Mt,label:"Left Trail",slotting:S.SPLIT,type:E.NONE,slots:23},{position:_t,label:"Right Trail",slotting:S.SPLIT,type:E.OTTER,slots:23}],Dt=Object(s.combineReducers)({planesConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,n=arguments.length>1?arguments[1]:void 0,e=n.position;return t.map(function(t){if(t.position!==e)return t;switch(n.type){case"SET_PLANE_SLOTTING":return Object(nt.a)({},t,{slotting:n.slotting});case"SET_PLANE_SLOTS":return Object(nt.a)({},t,{slots:n.slots});case"SET_PLANE_TYPE":return Object(nt.a)({},t,{type:n.planeType});default:return t}})},formationConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{slots:42,baseSize:6,type:j.HD},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_FORMATION_SLOTS":return Object(nt.a)({},t,{slots:n.slots});case"SET_BASE_SIZE":return Object(nt.a)({},t,{baseSize:n.baseSize});case"SET_FORMATION_TYPE":return Object(nt.a)({},t,{type:n.formationType});default:return t}},viewConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{colorBy:b.PLANE,numberBy:w.SLOT_NUM,show:k.BOTH},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_COLOR_BY":return Object(nt.a)({},t,{colorBy:n.colorBy});case"SET_NUMBER_BY":return Object(nt.a)({},t,{numberBy:n.numberBy});case"SET_SHOW":return Object(nt.a)({},t,{show:n.show});default:return t}}}),xt=Object(s.createStore)(Dt,Object(c.composeWithDevTools)());u.a.render(a.a.createElement(l.a,{store:xt},a.a.createElement(function(){return a.a.createElement(f.a,{fluid:!0,style:{marginTop:"10px",height:"100vh"}},a.a.createElement(Lt,null),a.a.createElement(yt,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[174,1,2]]]);
//# sourceMappingURL=main.188a0533.chunk.js.map